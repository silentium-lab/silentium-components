!function(e,t){"use strict";var r=Object.defineProperty,s=(e,t,s)=>((e,t,s)=>t in e?r(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);class n extends t.TheInformation{constructor(e){super(e),this.baseSrc=e,s(this,"theValue"),s(this,"isInit",!1)}value(e){return this.baseSrc.value(e),this}valueExisted(){return this.initOwner(),t.isFilled(this.theValue)}valueSync(){if(this.initOwner(),!t.isFilled(this.theValue))throw new Error("no value in sync");return this.theValue}initOwner(){return this.isInit||(this.isInit=!0,this.value(new t.From((e=>{this.theValue=e})))),this}}class i extends t.TheInformation{constructor(e,t,r){super([e,t,r]),this.conditionSrc=e,this.leftSrc=t,this.rightSrc=r}value(e){const r=new n(this.leftSrc).initOwner();let s;return void 0!==this.rightSrc&&(s=new n(this.rightSrc).initOwner()),this.conditionSrc.value(new t.From((t=>{t?e.give(r.valueSync()):s&&e.give(s.valueSync())}))),this}}class a extends t.TheInformation{constructor(e,t){super(t),this.permanentValue=e,this.triggerSrc=t}value(e){return this.triggerSrc.value(new t.From((()=>{e.give(this.permanentValue)}))),this}}class c extends t.TheInformation{constructor(e,t,r){super([e,t,r]),this.error=e,this.baseSrc=t,this.timeoutSrc=r}value(e){let r=null;const s=new t.Shared(this.baseSrc,!0);return this.addDep(s),this.timeoutSrc.value(new t.From((n=>{r&&clearTimeout(r);let i=!1;r=setTimeout((()=>{i||(i=!0,this.error.give(new Error("Timeout reached in Deadline class")))}),n);const a=new t.Filtered(s,(()=>!i));this.addDep(a),a.value(e),s.value(new t.From((()=>{i=!0})))}))),this}}class o extends t.TheInformation{constructor(e,t){super(),this.baseSrc=e,this.triggerSrc=t}value(e){const r=new n(this.baseSrc).initOwner();return this.triggerSrc.value(new t.From((()=>{t.isFilled(r.valueSync())&&e.give(r.valueSync())}))),this}}var l=Object.defineProperty,h=(e,t,r)=>((e,t,r)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,t+"",r);class u extends t.TheInformation{constructor(e,r=[],s=[]){super([e]),this.baseEntitySource=e,this.alwaysKeep=r,this.excludeKeys=s,h(this,"comparingSrc",new t.Late)}value(e){const r=new t.Applied(this.comparingSrc,(e=>JSON.parse(JSON.stringify(e)))),s=new t.All(r,this.baseEntitySource).value(new t.From((([t,r])=>{t&&e.give(Object.fromEntries(Object.entries(t).filter((([e,t])=>!!this.alwaysKeep.includes(e)||!this.excludeKeys.includes(e)&&t!==r[e]))))})));return this.addDep(s),this}give(e){return this.comparingSrc.give(e),this}}class v extends t.TheInformation{constructor(e,t){super(t,e),this.loadingStartSrc=e,this.loadingFinishSrc=t}value(e){return this.loadingStartSrc.value(new t.From((()=>{e.give(!0)}))),this.loadingFinishSrc.value(new t.From((()=>{e.give(!1)}))),this}}class S extends t.TheInformation{constructor(e,t){super(e,t),this.baseSrc=e,this.lockSrc=t}value(e){let r=!1;this.lockSrc.value(new t.From((e=>{r=e})));const s=new t.Filtered(this.baseSrc,(()=>!r));return this.addDep(s),s.value(e),this}}class d extends t.TheInformation{constructor(e){super(e),this.baseSrc=e}value(e){let r=null;return this.baseSrc.value(new t.From((t=>{t!==r&&(e.give(t),r=t)}))),this}}class w extends t.TheInformation{constructor(e){super(e),this.baseSrc=e}value(e){let r=!1;return this.baseSrc.value(new t.From((t=>{!1===r?r=!0:e.give(t)}))),this}}class p extends t.TheInformation{constructor(e,t){super(e,t),this.baseSrc=e,this.keySrc=t}value(e){const r=new t.All(this.baseSrc,this.keySrc).value(new t.From((([t,r])=>{const s=r.split(".");let n=t;s.forEach((e=>{n=n[e]})),void 0!==n&&n!==t&&e.give(n)})));return this.addDep(r),this}}class g extends t.TheInformation{constructor(e,t){super(e,t),this.targetSrc=e,this.triggerSrc=t}value(e){const r=new n(this.targetSrc);return r.initOwner(),this.triggerSrc.value(new t.From((()=>{r.valueExisted()&&e.give(r.valueSync())}))),this}}class m extends t.TheInformation{constructor(e){super(e),this.baseSrc=e}value(e){let r=!1,s=null;return this.baseSrc.value(new t.From((t=>{s=t,r||(r=!0,queueMicrotask((()=>{r=!1,null!==s&&(e.give(s),s=null)})))}))),this}}class f extends t.TheInformation{constructor(e){super(e),this.baseSrc=e}value(e){const r={};return this.baseSrc.value(new t.From((([t,s])=>{r[t]=s,e.give(r)}))),this}}class b extends t.TheInformation{constructor(e){super(...Object.values(e)),this.recordSrc=e}value(e){const r=Object.keys(this.recordSrc);return new t.All(...Object.values(this.recordSrc)).value(new t.From((t=>{const s={};t.forEach(((e,t)=>{s[r[t]]=e})),e.give(s)}))),this}}class O extends t.TheInformation{constructor(e,r=new t.Of("")){super(...e,r),this.sources=e,this.joinPartSrc=r}value(e){return new t.All(this.joinPartSrc,...this.sources).value(new t.From((([t,...r])=>{e.give(r.join(t))}))),this}}var F=Object.defineProperty,x=(e,t,r)=>((e,t,r)=>t in e?F(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class T extends t.TheInformation{constructor(e="",r=new t.Of({})){const s="string"==typeof e?new t.Of(e):e;super(s,r),this.placesSrc=r,x(this,"source"),x(this,"placesCounter",0),x(this,"vars",{$TPL:new t.Of("$TPL")}),this.source=s}value(e){const r=new b(this.vars);return new t.Applied(new t.All(this.source,this.placesSrc,r),(([e,t,r])=>(Object.entries(t).forEach((([t,r])=>{e=e.replaceAll(t,String(r))})),Object.entries(r).forEach((([t,r])=>{e=e.replaceAll(t,String(r))})),e))).value(e),this}template(e){return this.source=new t.Of(e),this.addDep(this.source),this}var(e){this.addDep(e);const t=`$var${this.placesCounter}`;return this.placesCounter+=1,this.vars[t]=e,t}}var y=Object.defineProperty,I=(e,t,r)=>((e,t,r)=>t in e?y(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,t+"",r);class A extends t.TheInformation{constructor(e,t,r){super([e,t,r]),this.conditionSrc=e,this.leftSrc=t,this.rightSrc=r,I(this,"instances",[])}value(e){return this.conditionSrc.value(new t.From((t=>{this.instances.length&&this.instances.forEach((e=>{e?.destroy()}));let r=null;t?r=this.leftSrc.get():this.rightSrc&&(r=this.rightSrc.get()),r&&(this.instances.push(r),r.value(e))}))),this}}class j extends t.TheInformation{constructor(e,r,s=new t.Of("")){super(e,r,s),this.patternSrc=e,this.valueSrc=r,this.flagsSrc=s}value(e){return new t.All(this.patternSrc,this.valueSrc,this.flagsSrc).value(new t.From((([t,r,s])=>{e.give(new RegExp(t,s).test(r))}))),this}}class E extends t.TheInformation{constructor(e,r,s,n=new t.Of("")){super(e,r,s,n),this.valueSrc=e,this.patternSrc=r,this.replaceValueSrc=s,this.flagsSrc=n}value(e){return new t.All(this.patternSrc,this.valueSrc,this.replaceValueSrc,this.flagsSrc).value(new t.From((([t,r,s,n])=>{e.give(String(r).replace(new RegExp(t,n),s))}))),this}}class D extends t.TheInformation{constructor(e,r,s=new t.Of("")){super(e,r,s),this.patternSrc=e,this.valueSrc=r,this.flagsSrc=s}value(e){return new t.All(this.patternSrc,this.valueSrc,this.flagsSrc).value(new t.From((([t,r,s])=>{const n=new RegExp(t,s).exec(r);e.give(n??[])}))),this}}class k extends t.TheInformation{constructor(e,t,r){super(e,t,r),this.baseSrc=e,this.keySrc=t,this.valueSrc=r}value(e){return new t.All(this.baseSrc,this.keySrc,this.valueSrc).value(new t.From((([t,r,s])=>{t[r]=s,e.give(t)}))),this}}var P=Object.defineProperty,R=(e,t,r)=>((e,t,r)=>t in e?P(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,t+"",r);class V extends t.TheInformation{constructor(e,t,r){super(e,t,r),this.urlSrc=e,this.routesSrc=t,this.defaultSrc=r,R(this,"instance")}value(e){return new t.All(this.routesSrc,this.urlSrc).value(new t.From((([r,s])=>{this.instance&&this.instance?.destroy(),this.instance=new t.Any(this.defaultSrc.get(),...r.map((e=>new A(new j(new t.Of(e.pattern),new t.Of(s),e.patternFlags?new t.Of(e.patternFlags):void 0),e.template)))).value(e)}))),this}}class J extends t.TheInformation{constructor(e,t){super(e,t),this.oneSrc=e,this.twoSrc=t}value(e){return new t.All(this.oneSrc,this.twoSrc).value(new t.From((([t,r])=>{e.give(t&&r)}))),this}}class N extends t.TheInformation{constructor(e,t){super(e,t),this.oneSrc=e,this.twoSrc=t}value(e){return new t.All(this.oneSrc,this.twoSrc).value(new t.From((([t,r])=>{e.give(t||r)}))),this}}class C extends t.TheInformation{constructor(e){super(e),this.baseSrc=e}value(e){return this.baseSrc.value(new t.From((t=>{e.give(!t)}))),this}}class L extends t.TheInformation{constructor(e){super(e),this.baseSrc=e}value(e){return new t.Applied(this.baseSrc,Boolean).value(e),this}}class $ extends t.TheInformation{constructor(e,t){super(e),this.jsonSrc=e,this.errorOwner=t}value(e){return this.jsonSrc.value(new t.From((t=>{try{e.give(JSON.parse(t))}catch(e){this.errorOwner?.give(new Error(`Failed to parse JSON: ${e}`))}}))),this}}class K extends t.TheInformation{constructor(e,t){super(e),this.dataSrc=e,this.errorOwner=t}value(e){return this.dataSrc.value(new t.From((t=>{try{e.give(JSON.stringify(t))}catch{this.errorOwner?.give(new Error("Failed to convert to JSON"))}}))),this}}class M extends t.TheInformation{constructor(e){super(e),this.baseSrc=e}value(e){return new t.Applied(this.baseSrc,(e=>e[0])).value(e),this}}e.And=J,e.Bool=L,e.Branch=i,e.Concatenated=O,e.Const=a,e.Deadline=c,e.Deferred=o,e.Dirty=u,e.First=M,e.FromJson=$,e.HashTable=f,e.Loading=v,e.Lock=S,e.Memo=d,e.Not=C,e.OnlyChanged=w,e.Or=N,e.Path=p,e.RecordOf=b,e.RegexpMatch=D,e.RegexpMatched=j,e.RegexpReplaced=E,e.Router=V,e.Set=k,e.Shot=g,e.Sync=n,e.Template=T,e.Tick=m,e.ToJson=K}({},silentium);
