!function(e,t){"use strict";const l=e=>{let t;return e((e=>{t=e})),{value(){if(void 0===t)throw new Error("no value in sync");return t}}},r=(e,t,r)=>n=>{const a=l(t);let o;void 0!==r&&(o=l(r)),e((e=>{e?n(a.value()):o&&n(o.value())}))},n=(e,l,r=t.i(""))=>n=>{t.all(e,l,r)((([e,t,l])=>{n(new RegExp(e,l).test(t))}))};e.and=(e,l)=>r=>{t.all(e,l)((([e,t])=>{r(e&&t)}))},e.branch=r,e.concatenated=(e,l=t.i(""))=>r=>{t.all(l,...e)((([e,...t])=>{r(t.join(e))}))},e.deadline=(e,l,r)=>{let n=null;return a=>{const[o,i]=t.sharedStateless(l);return r((l=>{n&&clearTimeout(n);let r=!1;n=setTimeout((()=>{r||(r=!0,e(new Error("Timeout reached in Deadline class")))}),l);t.filtered(o,(()=>!r))(a),o((()=>{r=!0}))})),()=>{i.destroy()}}},e.deferred=(e,r)=>n=>{const a=l(e);r((()=>{t.isFilled(a.value())&&n(a.value())}))},e.dirty=(e,l=[],r=[])=>{const[n,a]=t.of(),o=t.applied(n,(e=>JSON.parse(JSON.stringify(e))));return[n=>{t.all(o,e)((([e,t])=>{e&&n(Object.fromEntries(Object.entries(e).filter((([e,n])=>!!l.includes(e)||!r.includes(e)&&n!==t[e]))))}))},a]},e.first=e=>t.applied(e,(e=>e[0])),e.fromJson=(e,t)=>l=>{e((e=>{try{l(JSON.parse(e))}catch(e){t?.(new Error(`Failed to parse JSON: ${e}`))}}))},e.hashTable=e=>t=>{const l={};e((([e,r])=>{l[e]=r,t(l)}))},e.loading=(e,t)=>l=>{e((()=>{l(!0)})),t((()=>{l(!1)}))},e.lock=(e,l)=>{let r=!1;const n=t.filtered(e,(()=>!r));return e=>{l((e=>{r=e})),n(e)}},e.memo=e=>{let t=null;return l=>{e((e=>{e!==t&&(l(e),t=e)}))}},e.not=e=>t=>{e((e=>{t(!e)}))},e.onlyChanged=e=>{let t=!1;return l=>{e((e=>{!1===t?t=!0:l(e)}))}},e.or=(e,l)=>r=>{t.all(e,l)((([e,t])=>{r(e||t)}))},e.path=(e,l)=>r=>{t.all(e,l)((([e,t])=>{const l=t.split(".");let n=e;l.forEach((e=>{n=n[e]})),void 0!==n&&n!==e&&r(n)}))},e.record=e=>l=>{const r=Object.keys(e);t.all(...Object.values(e))((e=>{const t={};e.forEach(((e,l)=>{t[r[l]]=e})),l(t)}))},e.regexpMatch=(e,l,r=t.i(""))=>n=>{t.all(e,l,r)((([e,t,l])=>{const r=new RegExp(e,l).exec(t);n(r??[])}))},e.regexpMatched=n,e.regexpReplaced=(e,l,r,n=t.i(""))=>a=>{t.all(l,e,r,n)((([e,t,l,r])=>{a(String(t).replace(new RegExp(e,r),l))}))},e.router=(e,l,a)=>o=>{l((l=>{t.any(t.chain(e,a),...l.map((l=>r(n(t.i(l.pattern),e,l.patternFlags?t.i(l.patternFlags):void 0),"function"==typeof l.template?l.template:t.i(l.template)))))(o)}))},e.set=(e,l,r)=>n=>{t.all(e,l,r)((([e,t,l])=>{e[t]=l,n(e)}))},e.shot=(e,r)=>n=>{const a=l(e);r((()=>{t.isFilled(a.value())&&n(a.value())}))},e.tick=e=>t=>{let l=!1,r=null;e((e=>{r=e,l||(l=!0,queueMicrotask((()=>{l=!1,null!==r&&(t(r),r=null)})))}))},e.toJson=(e,t)=>l=>{e((e=>{try{l(JSON.stringify(e))}catch{t?.(new Error("Failed to convert to JSON"))}}))}}({},silentium);
