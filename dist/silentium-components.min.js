!function(e,t){"use strict";const l=e=>{let t;return e((e=>{t=e})),{value(){if(void 0===t)throw new Error("no value in sync");return t}}},n=(e,t,n)=>r=>{const a=l(t);let i;void 0!==n&&(i=l(n)),e((e=>{e?r(a.value()):i&&r(i.value())}))},r=(e,l,n=t.i(""))=>r=>{t.all(e,l,n)((([e,t,l])=>{r(new RegExp(e,l).test(t))}))};e.and=(e,l)=>n=>{t.all(e,l)((([e,t])=>{n(e&&t)}))},e.branch=n,e.concatenated=(e,l=t.i(""))=>n=>{t.all(l,...e)((([e,...t])=>{n(t.join(e))}))},e.deadline=(e,l,n)=>{let r=null;return a=>{const[i,o]=t.sharedStateless(l);return n((l=>{r&&clearTimeout(r);let n=!1;r=setTimeout((()=>{n||(n=!0,e(new Error("Timeout reached in Deadline class")))}),l);t.filtered(i,(()=>!n))(a),i((()=>{n=!0}))})),()=>{o.destroy()}}},e.deferred=(e,n)=>r=>{const a=l(e);n((()=>{t.isFilled(a.value())&&r(a.value())}))},e.dirty=(e,l=[],n=[])=>{const[r,a]=t.of(),i=t.applied(r,(e=>JSON.parse(JSON.stringify(e))));return[r=>{t.all(i,e)((([e,t])=>{e&&r(Object.fromEntries(Object.entries(e).filter((([e,r])=>!!l.includes(e)||!n.includes(e)&&r!==t[e]))))}))},a]},e.hashTable=e=>t=>{const l={};e((([e,n])=>{l[e]=n,t(l)}))},e.loading=(e,t)=>l=>{e((()=>{l(!0)})),t((()=>{l(!1)}))},e.lock=(e,l)=>{let n=!1;const r=t.filtered(e,(()=>!n));return e=>{l((e=>{n=e})),r(e)}},e.memo=e=>{let t=null;return l=>{e((e=>{e!==t&&(l(e),t=e)}))}},e.not=e=>t=>{e((e=>{t(!e)}))},e.onlyChanged=e=>{let t=!1;return l=>{e((e=>{!1===t?t=!0:l(e)}))}},e.or=(e,l)=>n=>{t.all(e,l)((([e,t])=>{n(e||t)}))},e.path=(e,l)=>n=>{t.all(e,l)((([e,t])=>{const l=t.split(".");let r=e;l.forEach((e=>{r=r[e]})),void 0!==r&&r!==e&&n(r)}))},e.record=e=>l=>{const n=Object.keys(e);t.all(...Object.values(e))((e=>{const t={};e.forEach(((e,l)=>{t[n[l]]=e})),l(t)}))},e.regexpMatch=(e,l,n=t.i(""))=>r=>{t.all(e,l,n)((([e,t,l])=>{const n=new RegExp(e,l).exec(t);r(n??[])}))},e.regexpMatched=r,e.regexpReplaced=(e,l,n,r=t.i(""))=>a=>{t.all(l,e,n,r)((([e,t,l,n])=>{a(String(t).replace(new RegExp(e,n),l))}))},e.router=(e,l,a)=>i=>{l((l=>{t.any(t.chain(e,a),...l.map((l=>n(r(t.i(l.pattern),e,l.patternFlags?t.i(l.patternFlags):void 0),"function"==typeof l.template?l.template:t.i(l.template)))))(i)}))},e.set=(e,l,n)=>r=>{t.all(e,l,n)((([e,t,l])=>{e[t]=l,r(e)}))},e.shot=(e,n)=>r=>{const a=l(e);n((()=>{t.isFilled(a.value())&&r(a.value())}))},e.tick=e=>t=>{let l=!1,n=null;e((e=>{n=e,l||(l=!0,queueMicrotask((()=>{l=!1,null!==n&&(t(n),n=null)})))}))}}({},silentium);
