import{TheInformation as e,Late as t,Applied as s,All as r,From as i,Shared as n,Filtered as c,isFilled as a,Of as u,Any as l,Chain as h}from"silentium";var o=Object.defineProperty,S=(e,t,s)=>((e,t,s)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,t+"",s);class v extends e{constructor(e,s=[],r=[]){super([e]),this.baseEntitySource=e,this.alwaysKeep=s,this.excludeKeys=r,S(this,"comparingSrc",new t)}value(e){const t=new s(this.comparingSrc,(e=>JSON.parse(JSON.stringify(e)))),n=new r(t,this.baseEntitySource).value(new i((([t,s])=>{t&&e.give(Object.fromEntries(Object.entries(t).filter((([e,t])=>!!this.alwaysKeep.includes(e)||!this.excludeKeys.includes(e)&&t!==s[e]))))})));return this.addDep(n),this}owner(){return this.comparingSrc.owner()}}class w extends e{constructor(e,t){super(t,e),this.loadingStartSrc=e,this.loadingFinishSrc=t}value(e){return this.loadingStartSrc.value(new i((()=>{e.give(!0)}))),this.loadingFinishSrc.value(new i((()=>{e.give(!1)}))),this}}class p extends e{constructor(e,t){super(e,t),this.baseSrc=e,this.keySrc=t}value(e){const t=new r(this.baseSrc,this.keySrc).value(new i((([t,s])=>{const r=s.split(".");let i=t;r.forEach((e=>{i=i[e]})),void 0!==i&&i!==t&&e.give(i)})));return this.addDep(t),this}}class d extends e{constructor(e,t,s){super([e,t,s]),this.error=e,this.baseSrc=t,this.timeoutSrc=s}value(e){let t=null;const s=new n(this.baseSrc,!0);return this.addDep(s),this.timeoutSrc.value(new i((r=>{t&&clearTimeout(t);let n=!1;t=setTimeout((()=>{n||(n=!0,this.error.give(new Error("Timeout reached in Deadline class")))}),r);const a=new c(s,(()=>!n));this.addDep(a),a.value(e),s.value(new i((()=>{n=!0})))}))),this}}class g extends e{constructor(e){super(e),this.baseSrc=e}value(e){let t=!1,s=null;return this.baseSrc.value(new i((r=>{s=r,t||(t=!0,queueMicrotask((()=>{t=!1,null!==s&&(e.give(s),s=null)})))}))),this}}var b=Object.defineProperty,x=(e,t,s)=>((e,t,s)=>t in e?b(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);class f extends e{constructor(e){super(e),this.baseSrc=e,x(this,"theValue"),x(this,"isInit",!1)}value(e){return this.baseSrc.value(e),this}valueExisted(){return this.initOwner(),a(this.theValue)}valueSync(){if(this.initOwner(),!a(this.theValue))throw new Error("no value in sync");return this.theValue}initOwner(){return this.isInit||(this.isInit=!0,this.value(new i((e=>{this.theValue=e})))),this}}class y extends e{constructor(e,t){super(),this.baseSrc=e,this.triggerSrc=t}value(e){const t=new f(this.baseSrc).initOwner();return this.triggerSrc.value(new i((()=>{a(t.valueSync())&&e.give(t.valueSync())}))),this}}class O extends e{constructor(e,t,s){super([e,t,s]),this.conditionSrc=e,this.leftSrc=t,this.rightSrc=s}value(e){const t=new f(this.leftSrc).initOwner();let s;return void 0!==this.rightSrc&&(s=new f(this.rightSrc).initOwner()),this.conditionSrc.value(new i((r=>{r?e.give(t.valueSync()):s&&e.give(s.valueSync())}))),this}}class m extends e{constructor(e){super(e),this.baseSrc=e}value(e){let t=null;return this.baseSrc.value(new i((s=>{s!==t&&(e.give(s),t=s)}))),this}}class E extends e{constructor(e,t){super(e,t),this.baseSrc=e,this.lockSrc=t}value(e){let t=!1;this.lockSrc.value(new i((e=>{t=e})));const s=new c(this.baseSrc,(()=>!t));return this.addDep(s),s.value(e),this}}class j extends e{constructor(e,t){super(e,t),this.targetSrc=e,this.triggerSrc=t}value(e){const t=new f(this.targetSrc);return t.initOwner(),this.triggerSrc.value(new i((()=>{t.valueExisted()&&e.give(t.valueSync())}))),this}}class k extends e{constructor(e){super(e),this.baseSrc=e}value(e){let t=!1;return this.baseSrc.value(new i((s=>{!1===t?t=!0:e.give(s)}))),this}}class V extends e{constructor(e){super(e),this.baseSrc=e}value(e){const t={};return this.baseSrc.value(new i((([s,r])=>{t[s]=r,e.give(t)}))),this}}class D extends e{constructor(e){super(...Object.values(e)),this.recordSrc=e}value(e){const t=Object.keys(this.recordSrc);return new r(...Object.values(this.recordSrc)).value(new i((s=>{const r={};s.forEach(((e,s)=>{r[t[s]]=e})),e.give(r)}))),this}}class F extends e{constructor(e,t=new u("")){super(...e,t),this.sources=e,this.joinPartSrc=t}value(e){return new r(this.joinPartSrc,...this.sources).value(new i((([t,...s])=>{e.give(s.join(t))}))),this}}var J=Object.defineProperty,N=(e,t,s)=>((e,t,s)=>t in e?J(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,t+"",s);class P extends e{constructor(e,t){const s="string"==typeof e?new u(e):e;super(s,t),this.rules=t,N(this,"source"),this.source=s}value(e){return new s(new r(this.source,this.rules),(([e,t])=>(Object.entries(t).forEach((([t,s])=>{e=e.replaceAll(t,String(s))})),e))).value(e),this}}class K extends e{constructor(e,t,s=new u("")){super(e,t,s),this.patternSrc=e,this.valueSrc=t,this.flagsSrc=s}value(e){return new r(this.patternSrc,this.valueSrc,this.flagsSrc).value(new i((([t,s,r])=>{e.give(new RegExp(t,r).test(s))}))),this}}class I extends e{constructor(e,t,s,r=new u("")){super(e,t,s,r),this.valueSrc=e,this.patternSrc=t,this.replaceValueSrc=s,this.flagsSrc=r}value(e){return new r(this.patternSrc,this.valueSrc,this.replaceValueSrc,this.flagsSrc).value(new i((([t,s,r,i])=>{e.give(String(s).replace(new RegExp(t,i),r))}))),this}}class R extends e{constructor(e,t,s=new u("")){super(e,t,s),this.patternSrc=e,this.valueSrc=t,this.flagsSrc=s}value(e){return new r(this.patternSrc,this.valueSrc,this.flagsSrc).value(new i((([t,s,r])=>{const i=new RegExp(t,r).exec(s);e.give(i??[])}))),this}}class T extends e{constructor(e,t,s){super(e,t,s),this.baseSrc=e,this.keySrc=t,this.valueSrc=s}value(e){return new r(this.baseSrc,this.keySrc,this.valueSrc).value(new i((([t,s,r])=>{t[s]=r,e.give(t)}))),this}}class q extends e{constructor(e,t,s){super(e,t,s),this.urlSrc=e,this.routesSrc=t,this.defaultSrc=s}value(t){return this.routesSrc.value(new i((s=>{new l(new h(this.urlSrc,this.defaultSrc),...s.map((t=>new O(new K(new u(t.pattern),this.urlSrc,t.patternFlags?new u(t.patternFlags):void 0),t.template instanceof e?t.template:new u(t.template))))).value(t)}))),this}}class A extends e{constructor(e,t){super(e,t),this.oneSrc=e,this.twoSrc=t}value(e){return new r(this.oneSrc,this.twoSrc).value(new i((([t,s])=>{e.give(t&&s)}))),this}}class B extends e{constructor(e,t){super(e,t),this.oneSrc=e,this.twoSrc=t}value(e){return new r(this.oneSrc,this.twoSrc).value(new i((([t,s])=>{e.give(t||s)}))),this}}class M extends e{constructor(e){super(e),this.baseSrc=e}value(e){return this.baseSrc.value(new i((t=>{e.give(!t)}))),this}}class $ extends e{constructor(e){super(e),this.baseSrc=e}value(e){return new s(this.baseSrc,Boolean).value(e),this}}class z extends e{constructor(e,t){super(e),this.jsonSrc=e,this.errorOwner=t}value(e){return this.jsonSrc.value(new i((t=>{try{e.give(JSON.parse(t))}catch(e){this.errorOwner?.give(new Error(`Failed to parse JSON: ${e}`))}}))),this}}class C extends e{constructor(e,t){super(e),this.dataSrc=e,this.errorOwner=t}value(e){return this.dataSrc.value(new i((t=>{try{e.give(JSON.stringify(t))}catch{this.errorOwner?.give(new Error("Failed to convert to JSON"))}}))),this}}class G extends e{constructor(e){super(e),this.baseSrc=e}value(e){return new s(this.baseSrc,(e=>e[0])).value(e),this}}export{A as And,$ as Bool,O as Branch,F as Concatenated,d as Deadline,y as Deferred,v as Dirty,G as First,z as FromJson,V as HashTable,w as Loading,E as Lock,m as Memo,M as Not,k as OnlyChanged,B as Or,p as Path,D as RecordOf,R as RegexpMatch,K as RegexpMatched,I as RegexpReplaced,q as Router,T as Set,j as Shot,P as Template,g as Tick,C as ToJson};
//# sourceMappingURL=silentium-components.min.mjs.map
