import{Event as e,Primitive as t,Transport as n,isDestroyable as r,Shared as s,Filtered as i,isFilled as u,Late as o,Applied as c,All as l,SharedSource as v,ExecutorApplied as a,LateShared as f,Of as h,DestroyContainer as p,TransportEvent as d,TransportDestroyable as b}from"silentium";function m(r,s,i){return e((e=>{const u=t(s);let o;void 0!==i&&(o=t(i)),r.event(n((t=>{let n=null;t?n=u.primitive():o&&(n=o.primitive()),null!==n&&e.use(n)})))}))}function $(t,s,i){return e((e=>{let u;const o=()=>{void 0!==u&&(u.destroy(),u=void 0)};return t.event(n((t=>{let n;o(),t?n=s.use():i&&(n=i.use()),void 0!==n&&(n.event(e),r(n)&&(u=n))}))),o}))}function y(t,r){return e((e=>{r.event(n((()=>{e.use(t)})))}))}function g(t,r,u){return e((e=>{let o=0;const c=s(r,!0);u.event(n((r=>{o&&clearTimeout(o);let s=!1;o=setTimeout((()=>{s||(s=!0,t.use(new Error("Timeout reached in Deadline")))}),r);i(c,(()=>!s)).event(e),c.event(n((()=>{s=!0})))})))}))}function E(r,s){return e((e=>{const i=t(r);s.event(n((()=>{const t=i.primitive();u(t)&&e.use(t)})))}))}function O(n){return e((e=>{const r=t(n).primitive();u(r)&&e.use(r)}))}var w=Object.defineProperty,j=(e,t,n)=>((e,t,n)=>t in e?w(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);function k(e,t=[],n=[],r){return new x(e,t,n,r)}class x{constructor(e,t=[],n=[],r){this.$base=e,this.keep=t,this.exclude=n,j(this,"$comparing",o()),j(this,"cloner"),this.cloner=void 0===r?e=>JSON.parse(JSON.stringify(e)):r}event(e){const t=c(this.$comparing,this.cloner);return l(t,this.$base).event(n((([t,n])=>{t&&e.use(Object.fromEntries(Object.entries(t).filter((([e,t])=>!!this.keep.includes(e)||!this.exclude.includes(e)&&t!==n[e]))))}))),this}use(e){return this.$comparing.use(e),this}}function S(t,r){return e((e=>{t.event(n((()=>e.use(!0)))),r.event(n((()=>e.use(!1))))}))}function T(t,r){return e((e=>{let s=!1;r.event(n((e=>{s=e})));i(t,(()=>!s)).event(e)}))}function J(t){return e((e=>{let r=null;t.event(n((t=>{t!==r&&u(t)&&(e.use(t),r=t)})))}))}function N(t){return e((e=>{let r=!1;t.event(n((t=>{!1===r?r=!0:e.use(t)})))}))}var P=Object.defineProperty,F=(e,t,n)=>((e,t,n)=>t in e?P(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);function R(e,t){return new A(e,t)}class A{constructor(e,t){F(this,"$base"),F(this,"$keyed"),this.$base=v(e),this.$keyed=s(t)}event(e){return l(this.$base,this.$keyed).event(n((([t,n])=>{const r=n.split(".");let s=t;r.forEach((e=>{s=s[e]})),void 0!==s&&s!==t&&e.use(s)}))),this}use(e){const n=t(this.$keyed);if(u(n)){const r=t(this.$base);this.$base.use({...r.primitiveWithException(),[n.primitiveWithException()]:e})}return this}}function L(t,r){return e((e=>{l(t,r).event(n((([t,n])=>{const r=n.split(".");let s=t;r.forEach((e=>{s=s[e]})),void 0!==s&&s!==t&&e.use(s)})))}))}function W(t,r){return e((e=>{r.event(n((()=>{t.event(e)})))}))}function q(r,s){return e((e=>{const i=t(r);i.primitive(),s.event(n((()=>{const t=i.primitive();u(t)&&e.use(t)})))}))}function B(t,n=0){return e((e=>{let r=null;a(t,(e=>t=>{r&&clearTimeout(r),r=setTimeout((()=>{e(t)}),n)})).event(e)}))}function D(t){return e((e=>{let r=!1,s=null;t.event(n((t=>{s=t,r||(r=!0,queueMicrotask((()=>{r=!1,null!==s&&(e.use(s),s=null)})))})))}))}function M(t,r,...s){return e((e=>{const i=f(),u=[];return t.event(n((e=>{const t=r(h(e),...s.map((e=>O(e))));u.push(t),t.event(i)}))),i.event(e),()=>{u.forEach((e=>e?.destroy())),u.length=0}}))}function z(t){return e((e=>{const r={};t.event(n((([t,n])=>{r[t]=n,e.use(r)})))}))}function C(t){return e((e=>{const r=Object.keys(t);l(...Object.values(t)).event(n((t=>{const n={};t.forEach(((e,t)=>{n[r[t]]=e})),e.use(n)})))}))}function G(t,r=h("")){return e((e=>{l(r,...t).event(n((([t,...n])=>{e.use(n.join(t))})))}))}var H=Object.defineProperty,I=(e,t,n)=>((e,t,n)=>t in e?H(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);function K(e=h(""),t=h({})){return new Q(e,t)}class Q{constructor(e=h(""),t=h({})){this.$src=e,this.$places=t,I(this,"dc",p()),I(this,"vars",{$TPL:h("$TPL")})}event(e){const t=C(this.vars);return c(l(this.$src,this.$places,t),(([e,t,n])=>(Object.entries(t).forEach((([t,n])=>{e=e.replaceAll(t,String(n))})),Object.entries(n).forEach((([t,n])=>{e=e.replaceAll(t,String(n))})),e))).event(e),this}template(e){this.$src=h(e)}var(e){const t=`$var${Object.keys(this.vars).length}`;return r(e)&&this.dc.add(e),this.vars[t]=e,t}destroy(){return this}}function U(t,r,s=h("")){return e((e=>{l(t,r,s).event(n((([t,n,r])=>{e.use(new RegExp(t,r).test(n))})))}))}function V(t,r,s,i=h("")){return e((e=>{l(r,t,s,i).event(n((([t,n,r,s])=>{e.use(String(n).replace(new RegExp(t,s),r))})))}))}function X(t,r,s=h("")){return e((e=>{l(t,r,s).event(n((([t,n,r])=>{const s=new RegExp(t,r).exec(n);e.use(s??[])})))}))}function Y(t,r,s){return e((e=>{l(t,r,s).event(n((([t,n,r])=>{t[n]=r,e.use(t)})))}))}const Z=d((()=>h(!1)));function _(t,r,s){return e((e=>{const i=[],u=()=>{i.forEach((e=>e.destroy())),i.length=0};return l(r,t).event(n((([t,n])=>{u();const r=l(s.use(),l(...t.map((e=>{const t=b(e.event);return i.push(t),$(U(h(e.pattern),h(n),e.patternFlags?h(e.patternFlags):void 0),t,Z)}))));c(r,(e=>{const t=e[1].find((e=>!1!==e));return t||e[0]})).event(e)}))),u}))}function ee(t,r){return e((e=>{l(t,r).event(n((([t,n])=>{e.use(t&&n)})))}))}function te(t,r){return e((e=>{l(t,r).event(n((([t,n])=>{e.use(t||n)})))}))}function ne(t){return e((e=>{t.event(n((t=>{e.use(!t)})))}))}function re(t){return e((e=>{c(t,Boolean).event(e)}))}function se(t,r){return e((e=>{t.event(n((t=>{try{e.use(JSON.parse(t))}catch(e){r?.use(new Error(`Failed to parse JSON: ${e}`))}})))}))}function ie(t,r){return e((e=>{t.event(n((t=>{try{e.use(JSON.stringify(t))}catch{r?.use(new Error("Failed to convert to JSON"))}})))}))}function ue(t){return e((e=>{c(t,(e=>e[0])).event(e)}))}export{ee as And,re as Bool,m as Branch,$ as BranchLazy,G as Concatenated,y as Constant,g as Deadline,E as Deferred,O as Detached,k as Dirty,ue as First,se as FromJson,z as HashTable,S as Loading,T as Lock,J as Memo,ne as Not,N as OnlyChanged,te as Or,R as Part,L as Path,W as Polling,C as RecordOf,X as RegexpMatch,U as RegexpMatched,V as RegexpReplaced,_ as Router,Y as Set,q as Shot,B as Task,K as Template,D as Tick,ie as ToJson,M as Transaction};
//# sourceMappingURL=silentium-components.min.mjs.map
