import{Actual as t,Message as n,Primitive as e,DestroyContainer as r,ResetSilenceCache as c,Shared as o,Filtered as i,isFilled as u,Late as s,Source as f,Applied as h,All as a,Computed as l,Value as d,ExecutorApplied as p,Of as y,Once as v,Map as m,isMessage as b,Rejections as g,isDestroyable as j}from"silentium";function E(r,c,o){const i=t(r),u=t(c),s=t(o);return n((function(t){const n=e(u);let r;void 0!==o&&(r=e(s)),i.then((e=>{if("boolean"!=typeof e)throw new Error("Branch received not boolean value");let c=null;!0===e?c=n.primitive():r&&(c=r.primitive()),null!==c&&t(c)}))}))}function O(t,e,c){return n((function(n){const o=r(),i=()=>{o.destroy()};return t.then((t=>{let r;i(),t?r=e():c&&(r=c()),void 0!==r&&(r.then(n),o.add(r))})),i}))}function w(t,e){return n((function(n,r){e.catch(r).then((()=>{n(t),n(c)}))}))}function S(e,r){const c=t(r);return n((function(t,n){let r=0;const u=o(e);c.then((e=>{r&&clearTimeout(r);let c=!1;r=setTimeout((()=>{c||(c=!0,n(new Error("Timeout reached in Deadline")))}),e);i(u,(()=>!c)).then(t),u.then((()=>{c=!0}))}))}))}function x(t,r){return n((function(n){const c=e(t);r.then((()=>{const t=c.primitive();u(t)&&n(t)}))}))}function A(t){return n((function(n){const r=e(t).primitive();u(r)&&n(r)}))}function $(t,n=[],e=[],r){const c=s({});return void 0===r&&(r=t=>JSON.parse(JSON.stringify(t))),f((function(o){const i=h(c,r);a(i,t).then((([t,r])=>{t&&o(Object.fromEntries(Object.entries(t).filter((([t,c])=>!!n.includes(t)||!e.includes(t)&&c!==r[t]))))}))}),(t=>{c.use(t)}))}function F(t,e){return n((function(n){t.then((()=>n(!0))),e.then((()=>n(!1)))}))}function T(t,e){return n((function(n){let r=!1;e.then((t=>{r=t}));i(t,(()=>!r)).then(n)}))}function J(t){return n((function(n){let e=null;t.then((t=>{t!==e&&u(t)&&(n(t),e=t)}))}))}function N(t,n){const e=s(),r={};return t.then((t=>{e.use(k(r,t,((t,n)=>{if(Array.isArray(t))return t.concat(n)})))})),n&&n.then((t=>{e.use(t)})),e}function k(t,n,e){return null==n||Object.keys(n).forEach((r=>{const c=n[r],o=t[r],i=e(o,c,r,t,n);void 0!==i?t[r]=i:P(c)&&P(o)?k(o,c,e):t[r]=c})),t}function P(t){return null!=t&&"object"==typeof t}function R(t){return n((function(n){let e=!1;t.then((t=>{!1===e?e=!0:n(t)}))}))}function q(n,r,c){const i=o(n),s=o(t(r));return f((function(t){a(i,s).then((([n,e])=>{const r=e.split(".");let o=n;r.forEach((t=>{o=o[t]})),void 0!==o&&o!==n?t(o):void 0!==c&&t(c)}))}),(t=>{const r=e(s);if(u(r)){const c=e(n);n.use({...c.primitiveWithException(),[r.primitiveWithException()]:t})}}))}const B=Symbol("not-set");function D(n,e,r){const c=t(n),o=t(e),i=t(r??B);return h(a(c,o,i),(([t,n,e])=>{const r=n.split(".");let c=t;return r.forEach((t=>{c=c[t]})),void 0!==c&&c!==t?c:e!==B?e:void 0}))}function L(t,e){return n((function(n,o){const i=r();e.then((()=>{i.destroy(),n(c),i.add(t.then(n).catch(o))})).catch(o)}))}function M(n,e){const r=t(n),c=t(e),o=(t,n)=>{if(null===t||"object"!=typeof t||Array.isArray(t))return t;const e={};for(const[r,c]of Object.entries(t)){if(n.includes(c))continue;const t=o(c,n);void 0===t||"object"==typeof t&&null!==t&&!Array.isArray(t)&&0===Object.keys(t).length||(e[r]=t)}return e};return l(o,r,c)}function W(e,c,o){const i=r();let u=-1,s=null,f={};const h=d(t(o));return n(((t,n)=>(i.add(e.then((t=>{t===h.value?.[u+1]?(u+=1,s=t):(u=-1,s=null,f={})})).catch(n)),i.add(c.then((n=>{null!==s&&(f[s]=n),u+1===h.value?.length&&(t(f),u=-1,s=null,f={})})).catch(n)),()=>i.destroy())))}function I(e,c){const o=t(e);return n(((t,n)=>{const e=r();return o.then((r=>{const o=c.find((t=>Array.isArray(t[0])?t[0].includes(r):t[0]===r));o&&e.add(o[1].then(t).catch(n))})).catch(n),e.destructor}))}function z(e,r=0){const c=t(e);return n((function(t){let n=null;p(c,(t=>e=>{n&&clearTimeout(n),n=setTimeout((()=>{t(e)}),r)})).then(t)}))}function C(t){return n((function(n){let e=!1,r=null;t.then((t=>{r=t,e||(e=!0,queueMicrotask((()=>{e=!1,null!==r&&(n(r),r=null)})))}))}))}function G(t){return n((function(n){const e={};t.then((([t,r])=>{e[t]=r,n(e)}))}))}function H(e){return n((function(n){const r=Object.keys(e);r.forEach((n=>{e[n]=t(e[n])})),a(...Object.values(e)).then((t=>{const e={};t.forEach(((t,n)=>{e[r[n]]=t})),n(e)}))}))}function K(e,r){const c=t(e);return n((t=>{c.then((n=>{const e={},c=Object.fromEntries(Object.entries(n).map((t=>r[t[0]]?(e[t[0]]=1,[t[0],r[t[0]](n)]):[t[0],y(t[1])])));Object.keys(r).forEach((t=>{e[t]||(c[t]=r[t](n))}));v(H(c)).then(t)}))}))}function Q(n,e){return m(t(n),(t=>K(t,e)))}function U(t,e){return n((function(n){a(t,e).then((([t,e])=>{n(!(!t||!e))}))}))}function V(t){return n((function(n){h(t,Boolean).then(n)}))}function X(t){return n((function(n){t.then((t=>{n(!t)}))}))}function Y(t,e){return n((function(n){a(t,e).then((([t,e])=>{n(!(!t&&!e))}))}))}function Z(t){return n((function(n,e){t.then((t=>{try{n(JSON.parse(t))}catch(t){e(new Error(`Failed to parse JSON: ${t}`))}}))}))}function _(t){return n((function(n,e){t.then((t=>{try{n(JSON.stringify(t))}catch{e(new Error("Failed to convert to JSON"))}}))}))}function tt(t){return n((function(n){h(t,(t=>t[0])).then(n)}))}function nt(e,r,c=y("")){const o=t(e),i=t(r),u=t(c);return n((function(t){a(o,i,u).then((([n,e,r])=>{const c=new RegExp(n,r).exec(e);t(c??[])}))}))}function et(e,r,c=y("")){const o=t(e),i=t(r),u=t(c);return n((function(t){a(o,i,u).then((([n,e,r])=>{t(new RegExp(n,r).test(e))}))}))}function rt(n,e,r,c=""){const o=t(n),i=t(e),u=t(r),s=t(c);return h(a(i,o,u,s),(([t,n,e,r])=>String(n).replace(new RegExp(t,r),e)))}function ct(e,r,c){const o=t(e),i=t(r),u=t(c);return n((function(t){a(o,i,u).then((([n,e,r])=>{n[e]=r,t(n)}))}))}function ot(e,c,o){const i=t(c),u=t(e);return n((function(n){const e=r(),c=()=>{e.destroy()};return a(i,u).then((([r,i])=>{c();a(...r.map((t=>t.pattern?et(y(t.pattern),y(i),t.patternFlags?y(t.patternFlags):void 0):t?.condition?.(i)))).then((c=>{const i=c.findIndex((t=>!0===t));if(-1===i){const r=t(o());e.add(r),r.then(n)}if(i>-1){const c=t(r[i].message());e.add(c),c.then(n)}}))})),c}))}function it(t,e=y("")){return n((function(n){a(e,...t).then((([t,...e])=>{n(e.join(t))}))}))}var ut=Object.defineProperty,st=(t,n,e)=>((t,n,e)=>n in t?ut(t,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[n]=e)(t,"symbol"!=typeof n?n+"":n,e);function ft(e="",r=y({})){const c=s();("string"==typeof e||b(e))&&c.chain(t(e));const o=new ht(c,r?t(r):void 0);return"function"==typeof e&&c.chain(n((t=>{t(e(o))}))),o}class ht{constructor(t=y(""),n=y({}),e=lt){this.$src=t,this.$places=n,this.escapeFn=e,st(this,"dc",r()),st(this,"rejections",g()),st(this,"vars",{$TPL:y("$TPL")})}then(t){const n=H(this.vars);return h(a(this.$src,this.$places,n),(([t,n,e])=>{try{Object.entries(n).forEach((([n,e])=>{t=t.replaceAll(n,String(e))})),Object.entries(e).forEach((([n,e])=>{t=t.replaceAll(n,String(e))}))}catch(t){this.rejections.reject(t)}return t})).then(t),this}template(t){this.$src=y(t)}raw(t){const n=`$var${Date.now().toString(36)+Math.random().toString(36).substring(2)}`;return j(t)&&this.dc.add(t),this.vars[n]=t,n}escaped(t){return j(t)&&this.dc.add(t),this.raw(h(t,this.escapeFn))}catch(t){return this.rejections.catch(t),this}destroy(){return this.dc.destroy(),this}}const at={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"};function lt(t){return"string"!=typeof t&&(t=String(t)),t.replace(/[&<>"'/]/g,(t=>at[t]))}export{U as And,V as Bool,E as Branch,O as BranchLazy,it as Concatenated,w as Constant,S as Deadline,x as Deferred,A as Detached,$ as Dirty,tt as First,Z as FromJson,G as HashTable,F as Loading,T as Lock,J as Memo,N as MergeAccumulation,X as Not,R as OnlyChanged,Y as Or,q as Part,D as Path,L as Polling,H as Record,M as RecordTruncated,nt as RegexpMatch,et as RegexpMatched,rt as RegexpReplaced,ot as Router,ct as Set,W as StateRecord,I as Switch,z as Task,ft as Template,ht as TemplateImpl,C as Tick,_ as ToJson,K as Transformed,Q as TransformedList,lt as escaped};
//# sourceMappingURL=silentium-components.min.mjs.map
