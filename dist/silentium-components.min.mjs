import{ActualMessage as n,Message as t,Primitive as e,DestroyContainer as r,Shared as i,Filtered as c,isFilled as o,Late as u,MessageSource as s,Applied as f,All as h,ExecutorApplied as l,Of as a,Rejections as p,isDestroyable as d}from"silentium";function v(r,i,c){const o=n(r),u=n(i),s=c&&n(c);return t((function(n){const t=e(u);let r;void 0!==s&&(r=e(s)),o.then((e=>{let i=null;e?i=t.primitive():r&&(i=r.primitive()),null!==i&&n(i)}))}))}function m(n,e,i){return t((function(t){const c=r(),o=()=>{c.destroy()};return n.then((n=>{let r;o(),n?r=e():i&&(r=i()),void 0!==r&&(r.then(t),c.add(r))})),o}))}function E(n,e){return t((function(t){e.then((()=>{t(n)}))}))}function y(e,r){const o=n(r);return t((function(n,t){let r=0;const u=i(e);o.then((e=>{r&&clearTimeout(r);let i=!1;r=setTimeout((()=>{i||(i=!0,t(new Error("Timeout reached in Deadline")))}),e);c(u,(()=>!i)).then(n),u.then((()=>{i=!0}))}))}))}function O(n,r){return t((function(t){const i=e(n);r.then((()=>{const n=i.primitive();o(n)&&t(n)}))}))}function g(n){return t((function(t){const r=e(n).primitive();o(r)&&t(r)}))}function j(n,t=[],e=[],r){const i=u();return void 0===r&&(r=n=>JSON.parse(JSON.stringify(n))),s((function(c){const o=f(i,r);h(o,n).then((([n,r])=>{n&&c(Object.fromEntries(Object.entries(n).filter((([n,i])=>!!t.includes(n)||!e.includes(n)&&i!==r[n]))))}))}),(n=>{i.use(n)}))}function b(n,e){return t((function(t){n.then((()=>t(!0))),e.then((()=>t(!1)))}))}function $(n,e){return t((function(t){let r=!1;e.then((n=>{r=n}));c(n,(()=>!r)).then(t)}))}function w(n){return t((function(t){let e=null;n.then((n=>{n!==e&&o(n)&&(t(n),e=n)}))}))}function S(n){return t((function(t){let e=!1;n.then((n=>{!1===e?e=!0:t(n)}))}))}function x(t,r){const c=i(t),u=i(n(r));return s((function(n){h(c,u).then((([t,e])=>{const r=e.split(".");let i=t;r.forEach((n=>{i=i[n]})),void 0!==i&&i!==t&&n(i)}))}),(n=>{const r=e(u);if(o(r)){const i=e(t);t.use({...i.primitiveWithException(),[r.primitiveWithException()]:n})}}))}function T(e,r){const i=n(r);return t((function(n){h(e,i).then((([t,e])=>{const r=e.split(".");let i=t;r.forEach((n=>{i=i[n]})),void 0!==i&&i!==t&&n(i)}))}))}function J(n,e){return t((function(t){e.then((()=>{n.then(t)}))}))}function N(n,r){return t((function(t){const i=e(n);i.primitive(),r.then((()=>{const n=i.primitive();o(n)&&t(n)}))}))}function F(e,r=0){const i=n(e);return t((function(n){let t=null;l(i,(n=>e=>{t&&clearTimeout(t),t=setTimeout((()=>{n(e)}),r)})).then(n)}))}function k(n){return t((function(t){let e=!1,r=null;n.then((n=>{r=n,e||(e=!0,queueMicrotask((()=>{e=!1,null!==r&&(t(r),r=null)})))}))}))}function P(n,e){return t((function(t){h(n,e).then((([n,e])=>{t(!(!n||!e))}))}))}function R(n){return t((function(t){f(n,Boolean).then(t)}))}function A(n){return t((function(t){n.then((n=>{t(!n)}))}))}function L(n,e){return t((function(t){h(n,e).then((([n,e])=>{t(!(!n&&!e))}))}))}function W(n){return t((function(t,e){n.then((n=>{try{t(JSON.parse(n))}catch(n){e(new Error(`Failed to parse JSON: ${n}`))}}))}))}function q(n){return t((function(t,e){n.then((n=>{try{t(JSON.stringify(n))}catch{e(new Error("Failed to convert to JSON"))}}))}))}function B(n){return t((function(t){f(n,(n=>n[0])).then(t)}))}function D(e,r,i=a("")){const c=n(e),o=n(r),u=n(i);return t((function(n){h(c,o,u).then((([t,e,r])=>{const i=new RegExp(t,r).exec(e);n(i??[])}))}))}function I(e,r,i=a("")){const c=n(e),o=n(r),u=n(i);return t((function(n){h(c,o,u).then((([t,e,r])=>{n(new RegExp(t,r).test(e))}))}))}function M(n,e,r,i=a("")){return t((function(t){h(e,n,r,i).then((([n,e,r,i])=>{t(String(e).replace(new RegExp(n,i),r))}))}))}function z(e,r,i){const c=n(e),o=n(r),u=n(i);return t((function(n){h(c,o,u).then((([t,e,r])=>{t[e]=r,n(t)}))}))}function C(n,e,i){return t((function(t){const c=r(),o=()=>{c.destroy()};return h(e,n).then((([n,e])=>{o();h(...n.map((n=>I(a(n.pattern),a(e),n.patternFlags?a(n.patternFlags):void 0)))).then((e=>{const r=e.findIndex((n=>!0===n));if(-1===r){const n=i();c.add(n),n.then(t)}if(r>-1){const e=n[r].message();c.add(e),e.then(t)}}))})),o}))}function G(n,e=a("")){return t((function(t){h(e,...n).then((([n,...e])=>{t(e.join(n))}))}))}function H(n){return t((function(t){const e={};n.then((([n,r])=>{e[n]=r,t(e)}))}))}function K(e){return t((function(t){const r=Object.keys(e);r.forEach((t=>{e[t]=n(e[t])})),h(...Object.values(e)).then((n=>{const e={};n.forEach(((n,t)=>{e[r[t]]=n})),t(e)}))}))}var Q=Object.defineProperty,U=(n,t,e)=>((n,t,e)=>t in n?Q(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e)(n,"symbol"!=typeof t?t+"":t,e);function V(n=a(""),t=a({})){return new X(n,t)}class X{constructor(n=a(""),t=a({})){this.$src=n,this.$places=t,U(this,"dc",r()),U(this,"rejections",new p),U(this,"vars",{$TPL:a("$TPL")})}then(n){const t=K(this.vars);return f(h(this.$src,this.$places,t),(([n,t,e])=>{try{Object.entries(t).forEach((([t,e])=>{n=n.replaceAll(t,String(e))})),Object.entries(e).forEach((([t,e])=>{n=n.replaceAll(t,String(e))}))}catch(n){this.rejections.reject(n)}return n})).then(n),this}template(n){this.$src=a(n)}var(n){const t=`$var${Object.keys(this.vars).length}`;return d(n)&&this.dc.add(n),this.vars[t]=n,t}catch(n){return this.rejections.catch(n),this}destroy(){return this.dc.destroy(),this}}export{P as And,R as Bool,v as Branch,m as BranchLazy,G as Concatenated,E as Constant,y as Deadline,O as Deferred,g as Detached,j as Dirty,B as First,W as FromJson,H as HashTable,b as Loading,$ as Lock,w as Memo,A as Not,S as OnlyChanged,L as Or,x as Part,T as Path,J as Polling,K as Record,D as RegexpMatch,I as RegexpMatched,M as RegexpReplaced,C as Router,z as Set,N as Shot,F as Task,V as Template,k as Tick,q as ToJson};
//# sourceMappingURL=silentium-components.min.mjs.map
