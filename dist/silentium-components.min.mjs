import{ActualMessage as n,Message as t,Primitive as e,DestroyContainer as r,Shared as i,Filtered as c,isFilled as o,Late as u,MessageSource as s,Applied as f,All as h,Empty as l,Nothing as a,ExecutorApplied as p,Of as d,Rejections as v,isDestroyable as m}from"silentium";function E(r,i,c){const o=n(r),u=n(i),s=c&&n(c);return t((function(n){const t=e(u);let r;void 0!==s&&(r=e(s)),o.then((e=>{let i=null;e?i=t.primitive():r&&(i=r.primitive()),null!==i&&n(i)}))}))}function y(n,e,i){return t((function(t){const c=r(),o=()=>{c.destroy()};return n.then((n=>{let r;o(),n?r=e():i&&(r=i()),void 0!==r&&(r.then(t),c.add(r))})),o}))}function O(n,e){return t((function(t){e.then((()=>{t(n)}))}))}function g(e,r){const o=n(r);return t((function(n,t){let r=0;const u=i(e);o.then((e=>{r&&clearTimeout(r);let i=!1;r=setTimeout((()=>{i||(i=!0,t(new Error("Timeout reached in Deadline")))}),e);c(u,(()=>!i)).then(n),u.then((()=>{i=!0}))}))}))}function j(n,r){return t((function(t){const i=e(n);r.then((()=>{const n=i.primitive();o(n)&&t(n)}))}))}function b(n){return t((function(t){const r=e(n).primitive();o(r)&&t(r)}))}function $(n,t=[],e=[],r){const i=u();return void 0===r&&(r=n=>JSON.parse(JSON.stringify(n))),s((function(c){const o=f(i,r);h(o,n).then((([n,r])=>{n&&c(Object.fromEntries(Object.entries(n).filter((([n,i])=>!!t.includes(n)||!e.includes(n)&&i!==r[n]))))}))}),(n=>{i.use(n)}))}function w(n,e){return t((function(t){n.then((()=>t(!0))),e.then((()=>t(!1)))}))}function S(n,e){return t((function(t){let r=!1;e.then((n=>{r=n}));c(n,(()=>!r)).then(t)}))}function x(n){return t((function(t){let e=null;n.then((n=>{n!==e&&o(n)&&(t(n),e=n)}))}))}function T(n){return t((function(t){let e=!1;n.then((n=>{!1===e?e=!0:t(n)}))}))}function J(t,r){const c=i(t),u=i(n(r));return s((function(n){h(c,u).then((([t,e])=>{const r=e.split(".");let i=t;r.forEach((n=>{i=i[n]})),void 0!==i&&i!==t&&n(i)}))}),(n=>{const r=e(u);if(o(r)){const i=e(t);t.use({...i.primitiveWithException(),[r.primitiveWithException()]:n})}}))}function N(e,r,i){const c=n(r),o=n(i);return t((function(n){h(e,c,o).then((([t,e,r])=>{const i=e.split(".");let c=t;i.forEach((n=>{c=c[n]})),void 0!==c&&c!==t?n(c):void 0!==r&&n(r)}))}))}function F(t,e){const r=n(t),i=n(e);return l(N(r,i,a))}function k(n,e){return t((function(t){e.then((()=>{n.then(t)}))}))}function P(n,r){return t((function(t){const i=e(n);i.primitive(),r.then((()=>{const n=i.primitive();o(n)&&t(n)}))}))}function R(e,r=0){const i=n(e);return t((function(n){let t=null;p(i,(n=>e=>{t&&clearTimeout(t),t=setTimeout((()=>{n(e)}),r)})).then(n)}))}function A(n){return t((function(t){let e=!1,r=null;n.then((n=>{r=n,e||(e=!0,queueMicrotask((()=>{e=!1,null!==r&&(t(r),r=null)})))}))}))}function L(n,e){return t((function(t){h(n,e).then((([n,e])=>{t(!(!n||!e))}))}))}function W(n){return t((function(t){f(n,Boolean).then(t)}))}function q(n){return t((function(t){n.then((n=>{t(!n)}))}))}function B(n,e){return t((function(t){h(n,e).then((([n,e])=>{t(!(!n&&!e))}))}))}function D(n){return t((function(t,e){n.then((n=>{try{t(JSON.parse(n))}catch(n){e(new Error(`Failed to parse JSON: ${n}`))}}))}))}function I(n){return t((function(t,e){n.then((n=>{try{t(JSON.stringify(n))}catch{e(new Error("Failed to convert to JSON"))}}))}))}function M(n){return t((function(t){f(n,(n=>n[0])).then(t)}))}function z(e,r,i=d("")){const c=n(e),o=n(r),u=n(i);return t((function(n){h(c,o,u).then((([t,e,r])=>{const i=new RegExp(t,r).exec(e);n(i??[])}))}))}function C(e,r,i=d("")){const c=n(e),o=n(r),u=n(i);return t((function(n){h(c,o,u).then((([t,e,r])=>{n(new RegExp(t,r).test(e))}))}))}function G(n,e,r,i=d("")){return t((function(t){h(e,n,r,i).then((([n,e,r,i])=>{t(String(e).replace(new RegExp(n,i),r))}))}))}function H(e,r,i){const c=n(e),o=n(r),u=n(i);return t((function(n){h(c,o,u).then((([t,e,r])=>{t[e]=r,n(t)}))}))}function K(n,e,i){return t((function(t){const c=r(),o=()=>{c.destroy()};return h(e,n).then((([n,e])=>{o();h(...n.map((n=>C(d(n.pattern),d(e),n.patternFlags?d(n.patternFlags):void 0)))).then((e=>{const r=e.findIndex((n=>!0===n));if(-1===r){const n=i();c.add(n),n.then(t)}if(r>-1){const e=n[r].message();c.add(e),e.then(t)}}))})),o}))}function Q(n,e=d("")){return t((function(t){h(e,...n).then((([n,...e])=>{t(e.join(n))}))}))}function U(n){return t((function(t){const e={};n.then((([n,r])=>{e[n]=r,t(e)}))}))}function V(e){return t((function(t){const r=Object.keys(e);r.forEach((t=>{e[t]=n(e[t])})),h(...Object.values(e)).then((n=>{const e={};n.forEach(((n,t)=>{e[r[t]]=n})),t(e)}))}))}var X=Object.defineProperty,Y=(n,t,e)=>((n,t,e)=>t in n?X(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e)(n,"symbol"!=typeof t?t+"":t,e);function Z(n=d(""),t=d({})){return new _(n,t)}class _{constructor(n=d(""),t=d({})){this.$src=n,this.$places=t,Y(this,"dc",r()),Y(this,"rejections",new v),Y(this,"vars",{$TPL:d("$TPL")})}then(n){const t=V(this.vars);return f(h(this.$src,this.$places,t),(([n,t,e])=>{try{Object.entries(t).forEach((([t,e])=>{n=n.replaceAll(t,String(e))})),Object.entries(e).forEach((([t,e])=>{n=n.replaceAll(t,String(e))}))}catch(n){this.rejections.reject(n)}return n})).then(n),this}template(n){this.$src=d(n)}var(n){const t=`$var${Object.keys(this.vars).length}`;return m(n)&&this.dc.add(n),this.vars[t]=n,t}catch(n){return this.rejections.catch(n),this}destroy(){return this.dc.destroy(),this}}export{L as And,W as Bool,E as Branch,y as BranchLazy,Q as Concatenated,O as Constant,g as Deadline,j as Deferred,b as Detached,$ as Dirty,M as First,D as FromJson,U as HashTable,w as Loading,S as Lock,x as Memo,q as Not,T as OnlyChanged,B as Or,J as Part,N as Path,F as PathExisted,k as Polling,V as Record,z as RegexpMatch,C as RegexpMatched,G as RegexpReplaced,K as Router,H as Set,P as Shot,R as Task,Z as Template,A as Tick,I as ToJson};
//# sourceMappingURL=silentium-components.min.mjs.map
