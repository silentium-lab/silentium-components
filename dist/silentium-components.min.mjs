import{primitive as e,shared as t,filtered as n,isFilled as r,late as l,applied as o,all as i,executorApplied as c,of as s,destructor as a}from"silentium";const u=(t,n,r)=>l=>{const o=e(n);let i;void 0!==r&&(i=e(r)),t((e=>{let t=null;e?t=o.primitive():i&&(t=i.primitive()),null!==t&&l(t)}))},p=(e,t,n)=>r=>{let l;return e((e=>{void 0!==l&&"function"==typeof l&&l();let o=null;e?o=t():n&&(o=n()),o&&(l=o(r))})),()=>{l?.()}},v=(e,t)=>n=>{t((()=>{n(e)}))},m=(e,r,l)=>o=>{let i=null;const c=t(r,!0);l((t=>{i&&clearTimeout(i);let r=!1;i=setTimeout((()=>{r||(r=!0,e(new Error("Timeout reached in Deadline class")))}),t);n(c.event,(()=>!r))(o),c.event((()=>{r=!0}))}))},f=(t,n)=>l=>{const o=e(t);n((()=>{const e=o.primitive();r(e)&&l(e)}))},d=t=>function(n){const l=e(t).primitive();r(l)&&n(l)},E=(e,t=[],n=[],r)=>{const c=l();return void 0===r&&(r=e=>JSON.parse(JSON.stringify(e))),{event:l=>{const s=o(c.event,r);i(s,e)((([e,r])=>{e&&l(Object.fromEntries(Object.entries(e).filter((([e,l])=>!!t.includes(e)||!n.includes(e)&&l!==r[e]))))}))},use:e=>{c.use(e)}}},h=(e,t)=>n=>{e((()=>n(!0))),t((()=>n(!1)))},O=(e,t)=>r=>{let l=!1;t((e=>{l=e}));n(e,(()=>!l))(r)},g=e=>t=>{let n=null;e((e=>{e!==n&&(t(e),n=e)}))},S=e=>t=>{let n=!1;e((e=>{!1===n?n=!0:t(e)}))},j=(t,n)=>{const l=e(t.event),o=e(n);return{event:e=>{i(t.event,n)((([t,n])=>{const r=n.split(".");let l=t;r.forEach((e=>{l=l[e]})),void 0!==l&&l!==t&&e(l)}))},use:e=>{const n=o.primitive();r(n)&&t.use({...l.primitive(),[n]:e})}}},y=(e,t)=>n=>{i(e,t)((([e,t])=>{const r=t.split(".");let l=e;r.forEach((e=>{l=l[e]})),void 0!==l&&l!==e&&n(l)}))},T=(e,t)=>n=>{t((()=>{e(n)}))},b=(t,n)=>l=>{const o=e(t);n((()=>{const e=o.primitive();r(e)&&l(e)}))},w=(e,t=0)=>n=>{let r=null;c(e,(e=>n=>{r&&clearTimeout(r),r=setTimeout((()=>{e(n)}),t)}))(n)},J=e=>t=>{let n=!1,r=null;e((e=>{r=e,n||(n=!0,queueMicrotask((()=>{n=!1,null!==r&&(t(r),r=null)})))}))},N=e=>t=>{const n={};e((([e,r])=>{n[e]=r,t(n)}))},x=e=>t=>{const n=Object.keys(e);i(...Object.values(e))((e=>{const r={};e.forEach(((e,t)=>{r[n[t]]=e})),t(r)}))},$=(e,t=s(""))=>n=>{i(t,...e)((([e,...t])=>{n(t.join(e))}))},F=(e=s(""),t=s({}))=>{let n=0;const r={$TPL:s("$TPL")},l=[];return{value:n=>{const l=x(r);o(i(e,t,l),(([e,t,n])=>(Object.entries(t).forEach((([t,n])=>{e=e.replaceAll(t,String(n))})),Object.entries(n).forEach((([t,n])=>{e=e.replaceAll(t,String(n))})),e)))(n)},template:t=>{e=s(t)},var:e=>{const t=`$var${n}`;return n+=1,r[t]=a(e,(e=>{l.push(e)})).value,t},destroy(){l.forEach((e=>e()))}}},R=(e,t,n=s(""))=>r=>{i(e,t,n)((([e,t,n])=>{r(new RegExp(e,n).test(t))}))},k=(e,t,n,r=s(""))=>l=>{i(t,e,n,r)((([e,t,n,r])=>{l(String(t).replace(new RegExp(e,r),n))}))},A=(e,t,n=s(""))=>r=>{i(e,t,n)((([e,t,n])=>{const l=new RegExp(e,n).exec(t);r(l??[])}))},L=(e,t,n)=>r=>{i(e,t,n)((([e,t,n])=>{e[t]=n,r(e)}))},P=()=>s(!1),q=(e,t,n)=>r=>{const l=[],c=()=>{l.forEach((e=>e())),l.length=0};return i(t,e)((([e,t])=>{c();const u=i(n(),i(...e.map((e=>a(p(R(s(e.pattern),s(t),e.patternFlags?s(e.patternFlags):void 0),e.template,P),(e=>l.push(e))).value))));o(u,(e=>{const t=e[1].find((e=>!1!==e));return t||e[0]}))(r)})),c},B=(e,t)=>n=>{i(e,t)((([e,t])=>{n(e&&t)}))},D=(e,t)=>n=>{i(e,t)((([e,t])=>{n(e||t)}))},M=e=>t=>{e((e=>{t(!e)}))},z=e=>t=>{o(e,Boolean)(t)},C=(e,t)=>n=>{e((e=>{try{n(JSON.parse(e))}catch(e){t?.(new Error(`Failed to parse JSON: ${e}`))}}))},G=(e,t)=>n=>{e((e=>{try{n(JSON.stringify(e))}catch{t?.(new Error("Failed to convert to JSON"))}}))},H=e=>t=>{o(e,(e=>e[0]))(t)};export{B as and,z as bool,u as branch,p as branchLazy,$ as concatenated,v as constant,m as deadline,f as deferred,d as detached,E as dirty,H as first,C as fromJson,N as hashTable,h as loading,O as lock,g as memo,M as not,S as onlyChanged,D as or,j as part,y as path,T as polling,x as recordOf,A as regexpMatch,R as regexpMatched,k as regexpReplaced,q as router,L as set,b as shot,w as task,F as template,J as tick,G as toJson};
//# sourceMappingURL=silentium-components.min.mjs.map
