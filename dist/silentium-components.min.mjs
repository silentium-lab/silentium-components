import{TheInformation as e,isFilled as t,From as s,Shared as r,Filtered as i,Late as n,Applied as c,All as a,MbInfo as u,ExecutorApplied as h,Of as l,Lazy as o}from"silentium";var v=Object.defineProperty,S=(e,t,s)=>((e,t,s)=>t in e?v(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);class w extends e{constructor(e){super(e),this.baseSrc=e,S(this,"theValue"),S(this,"isInit",!1)}value(e){return this.baseSrc.value(e),this}valueExisted(){return this.initOwner(),t(this.theValue)}valueSync(){if(this.initOwner(),!t(this.theValue))throw new Error("no value in sync");return this.theValue}initOwner(){return this.isInit||(this.isInit=!0,this.value(new s((e=>{this.theValue=e})))),this}}class g extends e{constructor(e,t,s){super([e,t,s]),this.conditionSrc=e,this.leftSrc=t,this.rightSrc=s}value(e){const t=new w(this.leftSrc).initOwner();let r;return void 0!==this.rightSrc&&(r=new w(this.rightSrc).initOwner()),this.conditionSrc.value(new s((s=>{s?e.give(t.valueSync()):r&&e.give(r.valueSync())}))),this}}class p extends e{constructor(e,t){super(t),this.permanentValue=e,this.triggerSrc=t}value(e){return this.triggerSrc.value(new s((()=>{e.give(this.permanentValue)}))),this}}class d extends e{constructor(e,t,s){super([e,t,s]),this.error=e,this.baseSrc=t,this.timeoutSrc=s}value(e){let t=null;const n=new r(this.baseSrc,!0);return this.addDep(n),this.timeoutSrc.value(new s((r=>{t&&clearTimeout(t);let c=!1;t=setTimeout((()=>{c||(c=!0,this.error.give(new Error("Timeout reached in Deadline class")))}),r);const a=new i(n,(()=>!c));this.addDep(a),a.value(e),n.value(new s((()=>{c=!0})))}))),this}}class b extends e{constructor(e,t){super(),this.baseSrc=e,this.triggerSrc=t}value(e){const r=new w(this.baseSrc).initOwner();return this.triggerSrc.value(new s((()=>{t(r.valueSync())&&e.give(r.valueSync())}))),this}}var y=Object.defineProperty,x=(e,t,s)=>((e,t,s)=>t in e?y(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,t+"",s);class f extends e{constructor(e,t=[],s=[]){super([e]),this.baseEntitySource=e,this.alwaysKeep=t,this.excludeKeys=s,x(this,"comparingSrc",new n)}value(e){const t=new c(this.comparingSrc,(e=>JSON.parse(JSON.stringify(e)))),r=new a(t,this.baseEntitySource).value(new s((([t,s])=>{t&&e.give(Object.fromEntries(Object.entries(t).filter((([e,t])=>!!this.alwaysKeep.includes(e)||!this.excludeKeys.includes(e)&&t!==s[e]))))})));return this.addDep(r),this}give(e){return this.comparingSrc.give(e),this}}class O extends e{constructor(e,t){super(t,e),this.loadingStartSrc=e,this.loadingFinishSrc=t}value(e){return this.loadingStartSrc.value(new s((()=>{e.give(!0)}))),this.loadingFinishSrc.value(new s((()=>{e.give(!1)}))),this}}class m extends e{constructor(e,t){super(e,t),this.baseSrc=e,this.lockSrc=t}value(e){let t=!1;this.lockSrc.value(new s((e=>{t=e})));const r=new i(this.baseSrc,(()=>!t));return this.addDep(r),r.value(e),this}}class j extends e{constructor(e){super(e),this.baseSrc=e}value(e){let t=null;return this.baseSrc.value(new s((s=>{s!==t&&(e.give(s),t=s)}))),this}}class E extends e{constructor(e){super(e),this.baseSrc=e}value(e){let t=!1;return this.baseSrc.value(new s((s=>{!1===t?t=!0:e.give(s)}))),this}}var k=Object.defineProperty,P=(e,t,s)=>((e,t,s)=>t in e?k(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);class D extends e{constructor(e,t){super(e),this.baseSrc=e,this.key=t,P(this,"baseSync"),P(this,"keySync"),P(this,"keySrc"),this.keySrc=new u(t),this.baseSync=new w(e),this.keySync=new w(this.keySrc)}value(e){const t=new a(this.baseSrc,this.keySrc).value(new s((([t,s])=>{const r=s.split(".");let i=t;r.forEach((e=>{i=i[e]})),void 0!==i&&i!==t&&e.give(i)})));return this.addDep(t),this}give(e){return this.baseSrc.give({...this.baseSync.valueSync(),[this.keySync.valueSync()]:e}),this}}class V extends e{constructor(e,t){super(e,t),this.baseSrc=e,this.keySrc=t}value(e){const t=new a(this.baseSrc,this.keySrc).value(new s((([t,s])=>{const r=s.split(".");let i=t;r.forEach((e=>{i=i[e]})),void 0!==i&&i!==t&&e.give(i)})));return this.addDep(t),this}}class T extends e{constructor(e,t){super(e,t),this.baseSrc=e,this.triggerSrc=t}value(e){return this.triggerSrc.value(new s((()=>{this.baseSrc.value(new s((t=>{e.give(t)})))}))),this}}class F extends e{constructor(e,t){super(e,t),this.targetSrc=e,this.triggerSrc=t}value(e){const t=new w(this.targetSrc);return t.initOwner(),this.triggerSrc.value(new s((()=>{t.valueExisted()&&e.give(t.valueSync())}))),this}}class J extends e{constructor(e){super(e),this.baseSrc=e}value(e){let t=!1,r=null;return this.baseSrc.value(new s((s=>{r=s,t||(t=!0,queueMicrotask((()=>{t=!1,null!==r&&(e.give(r),r=null)})))}))),this}}class N extends e{constructor(e,t=0){super(e),this.baseSrc=e,this.delay=t}value(e){let t=null;return new h(this.baseSrc,(e=>s=>{t&&clearTimeout(t),t=setTimeout((()=>{e(s)}),this.delay)})).value(e),this}}class $ extends e{constructor(e){super(e),this.baseSrc=e}value(e){const t={};return this.baseSrc.value(new s((([s,r])=>{t[s]=r,e.give(t)}))),this}}class K extends e{constructor(e){super(...Object.values(e)),this.recordSrc=e}value(e){const t=Object.keys(this.recordSrc);return new a(...Object.values(this.recordSrc)).value(new s((s=>{const r={};s.forEach(((e,s)=>{r[t[s]]=e})),e.give(r)}))),this}}class C extends e{constructor(e,t=new l("")){super(...e,t),this.sources=e,this.joinPartSrc=t}value(e){return new a(this.joinPartSrc,...this.sources).value(new s((([t,...s])=>{e.give(s.join(t))}))),this}}var I=Object.defineProperty,R=(e,t,s)=>((e,t,s)=>t in e?I(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);class A extends e{constructor(e="",t=new l({})){const s="string"==typeof e?new l(e):e;super(s,t),this.placesSrc=t,R(this,"source"),R(this,"placesCounter",0),R(this,"vars",{$TPL:new l("$TPL")}),this.source=s}value(e){const t=new K(this.vars);return new c(new a(this.source,this.placesSrc,t),(([e,t,s])=>(Object.entries(t).forEach((([t,s])=>{e=e.replaceAll(t,String(s))})),Object.entries(s).forEach((([t,s])=>{e=e.replaceAll(t,String(s))})),e))).value(e),this}template(e){return this.source=new l(e),this.addDep(this.source),this}var(e){this.addDep(e);const t=`$var${this.placesCounter}`;return this.placesCounter+=1,this.vars[t]=e,t}}var L=Object.defineProperty,q=(e,t,s)=>((e,t,s)=>t in e?L(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,t+"",s);class B extends e{constructor(e,t,s){super([e,t,s]),this.conditionSrc=e,this.leftSrc=t,this.rightSrc=s,q(this,"instances",[])}value(e){return this.conditionSrc.value(new s((t=>{this.instances.length&&this.instances.forEach((e=>{e?.destroy()}));let s=null;t?s=this.leftSrc.get():this.rightSrc&&(s=this.rightSrc.get()),s&&(this.instances.push(s),s.value(e))}))),this}}class M extends e{constructor(e,t,s=new l("")){super(e,t,s),this.patternSrc=e,this.valueSrc=t,this.flagsSrc=s}value(e){return new a(this.patternSrc,this.valueSrc,this.flagsSrc).value(new s((([t,s,r])=>{e.give(new RegExp(t,r).test(s))}))),this}}class z extends e{constructor(e,t,s,r=new l("")){super(e,t,s,r),this.valueSrc=e,this.patternSrc=t,this.replaceValueSrc=s,this.flagsSrc=r}value(e){return new a(this.patternSrc,this.valueSrc,this.replaceValueSrc,this.flagsSrc).value(new s((([t,s,r,i])=>{e.give(String(s).replace(new RegExp(t,i),r))}))),this}}class G extends e{constructor(e,t,s=new l("")){super(e,t,s),this.patternSrc=e,this.valueSrc=t,this.flagsSrc=s}value(e){return new a(this.patternSrc,this.valueSrc,this.flagsSrc).value(new s((([t,s,r])=>{const i=new RegExp(t,r).exec(s);e.give(i??[])}))),this}}class H extends e{constructor(e,t,s){super(e,t,s),this.baseSrc=e,this.keySrc=t,this.valueSrc=s}value(e){return new a(this.baseSrc,this.keySrc,this.valueSrc).value(new s((([t,s,r])=>{t[s]=r,e.give(t)}))),this}}var Q=Object.defineProperty,U=(e,t,s)=>((e,t,s)=>t in e?Q(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,t+"",s);const W=new o((()=>new l(!1)));class X extends e{constructor(e,t,s){super(e,t,s),this.urlSrc=e,this.routesSrc=t,this.defaultSrc=s,U(this,"instance")}value(e){return new a(this.routesSrc,this.urlSrc).value(new s((([t,s])=>{this.instance&&this.instance?.destroy(),this.instance=new a(this.defaultSrc.get(),new a(...t.map((e=>new B(new M(new l(e.pattern),new l(s),e.patternFlags?new l(e.patternFlags):void 0),e.template,W))))),new c(this.instance,(e=>{const t=e[1].find((e=>!1!==e));return t||e[0]})).value(e)}))),this}}class Y extends e{constructor(e,t){super(e,t),this.oneSrc=e,this.twoSrc=t}value(e){return new a(this.oneSrc,this.twoSrc).value(new s((([t,s])=>{e.give(t&&s)}))),this}}class Z extends e{constructor(e,t){super(e,t),this.oneSrc=e,this.twoSrc=t}value(e){return new a(this.oneSrc,this.twoSrc).value(new s((([t,s])=>{e.give(t||s)}))),this}}class _ extends e{constructor(e){super(e),this.baseSrc=e}value(e){return this.baseSrc.value(new s((t=>{e.give(!t)}))),this}}class ee extends e{constructor(e){super(e),this.baseSrc=e}value(e){return new c(this.baseSrc,Boolean).value(e),this}}class te extends e{constructor(e,t){super(e),this.jsonSrc=e,this.errorOwner=t}value(e){return this.jsonSrc.value(new s((t=>{try{e.give(JSON.parse(t))}catch(e){this.errorOwner?.give(new Error(`Failed to parse JSON: ${e}`))}}))),this}}class se extends e{constructor(e,t){super(e),this.dataSrc=e,this.errorOwner=t}value(e){return this.dataSrc.value(new s((t=>{try{e.give(JSON.stringify(t))}catch{this.errorOwner?.give(new Error("Failed to convert to JSON"))}}))),this}}class re extends e{constructor(e){super(e),this.baseSrc=e}value(e){return new c(this.baseSrc,(e=>e[0])).value(e),this}}export{Y as And,ee as Bool,g as Branch,C as Concatenated,p as Const,d as Deadline,b as Deferred,f as Dirty,re as First,te as FromJson,$ as HashTable,O as Loading,m as Lock,j as Memo,_ as Not,E as OnlyChanged,Z as Or,D as Part,V as Path,T as Polling,K as RecordOf,G as RegexpMatch,M as RegexpMatched,z as RegexpReplaced,X as Router,H as Set,F as Shot,w as Sync,N as Task,A as Template,J as Tick,se as ToJson};
//# sourceMappingURL=silentium-components.min.mjs.map
