import{Primitive as t,Shared as n,Filtered as e,isFilled as r,Late as u,Applied as o,All as i,ExecutorApplied as c,LateShared as l,Destructor as s,Of as f}from"silentium";function a(n,e,r){return u=>{const o=t(e);let i;void 0!==r&&(i=t(r)),n((t=>{let n=null;t?n=o.primitive():i&&(n=i.primitive()),null!==n&&u(n)}))}}function p(t,n,e){return r=>{let u;return t((t=>{void 0!==u&&"function"==typeof u&&u();let o=null;t?o=n():e&&(o=e()),o&&(u=o(r))})),()=>{u?.()}}}function v(t,n){return e=>{n((()=>{e(t)}))}}function m(t,r,u){return o=>{let i=null;const c=n(r,!0);u((n=>{i&&clearTimeout(i);let r=!1;i=setTimeout((()=>{r||(r=!0,t(new Error("Timeout reached in Deadline class")))}),n);e(c.event,(()=>!r))(o),c.event((()=>{r=!0}))}))}}function h(n,e){return u=>{const o=t(n);e((()=>{const t=o.primitive();r(t)&&u(t)}))}}function d(n){return function(e){const u=t(n).primitive();r(u)&&e(u)}}function E(t,n=[],e=[],r){const c=u();return void 0===r&&(r=t=>JSON.parse(JSON.stringify(t))),{event:u=>{const l=o(c.event,r);i(l,t)((([t,r])=>{t&&u(Object.fromEntries(Object.entries(t).filter((([t,u])=>!!n.includes(t)||!e.includes(t)&&u!==r[t]))))}))},use:t=>{c.use(t)}}}function g(t,n){return e=>{t((()=>e(!0))),n((()=>e(!1)))}}function O(t,n){return r=>{let u=!1;n((t=>{u=t}));e(t,(()=>!u))(r)}}function S(t){return n=>{let e=null;t((t=>{t!==e&&(n(t),e=t)}))}}function y(t){return n=>{let e=!1;t((t=>{!1===e?e=!0:n(t)}))}}function j(n,e){const u=t(n.event),o=t(e);return{event:t=>{i(n.event,e)((([n,e])=>{const r=e.split(".");let u=n;r.forEach((t=>{u=u[t]})),void 0!==u&&u!==n&&t(u)}))},use:t=>{const e=o.primitive();r(e)&&n.use({...u.primitive(),[e]:t})}}}function T(t,n){return e=>{i(t,n)((([t,n])=>{const r=n.split(".");let u=t;r.forEach((t=>{u=u[t]})),void 0!==u&&u!==t&&e(u)}))}}function b(t,n){return e=>{n((()=>{t(e)}))}}function w(n,e){return u=>{const o=t(n);e((()=>{const t=o.primitive();r(t)&&u(t)}))}}function J(t,n=0){return e=>{let r=null;c(t,(t=>e=>{r&&clearTimeout(r),r=setTimeout((()=>{t(e)}),n)}))(e)}}function N(t){return n=>{let e=!1,r=null;t((t=>{r=t,e||(e=!0,queueMicrotask((()=>{e=!1,null!==r&&(n(r),r=null)})))}))}}function x(t,n,...e){return r=>{const u=l(),o=[];return t((t=>{const r=s(n(f(t),...e.map((t=>d(t)))));o.push(r),r.event(u.use)})),u.event(r),()=>{o.forEach((t=>t.destroy())),o.length=0}}}function $(t){return n=>{const e={};t((([t,r])=>{e[t]=r,n(e)}))}}function F(t){return n=>{const e=Object.keys(t);i(...Object.values(t))((t=>{const r={};t.forEach(((t,n)=>{r[e[n]]=t})),n(r)}))}}function R(t,n=f("")){return e=>{i(n,...t)((([t,...n])=>{e(n.join(t))}))}}function k(t=f(""),n=f({})){let e=0;const r={$TPL:f("$TPL")},u=[];return{value:e=>{const u=F(r);o(i(t,n,u),(([t,n,e])=>(Object.entries(n).forEach((([n,e])=>{t=t.replaceAll(n,String(e))})),Object.entries(e).forEach((([n,e])=>{t=t.replaceAll(n,String(e))})),t)))(e)},template:n=>{t=f(n)},var:t=>{const n=`$var${e}`;return e+=1,r[n]=s(t,(t=>{u.push(t)})).event,n},destroy(){u.forEach((t=>t()))}}}function A(t,n,e=f("")){return r=>{i(t,n,e)((([t,n,e])=>{r(new RegExp(t,e).test(n))}))}}function L(t,n,e,r=f("")){return u=>{i(n,t,e,r)((([t,n,e,r])=>{u(String(n).replace(new RegExp(t,r),e))}))}}function P(t,n,e=f("")){return r=>{i(t,n,e)((([t,n,e])=>{const u=new RegExp(t,e).exec(n);r(u??[])}))}}function q(t,n,e){return r=>{i(t,n,e)((([t,n,e])=>{t[n]=e,r(t)}))}}const B=()=>f(!1);function D(t,n,e){return r=>{const u=[],c=()=>{u.forEach((t=>t())),u.length=0};return i(n,t)((([t,n])=>{c();const l=i(e(),i(...t.map((t=>s(p(A(f(t.pattern),f(n),t.patternFlags?f(t.patternFlags):void 0),t.template,B),(t=>u.push(t))).event))));o(l,(t=>{const n=t[1].find((t=>!1!==t));return n||t[0]}))(r)})),c}}function M(t,n){return e=>{i(t,n)((([t,n])=>{e(t&&n)}))}}function z(t,n){return e=>{i(t,n)((([t,n])=>{e(t||n)}))}}function C(t){return n=>{t((t=>{n(!t)}))}}function G(t){return n=>{o(t,Boolean)(n)}}function H(t,n){return e=>{t((t=>{try{e(JSON.parse(t))}catch(t){n?.(new Error(`Failed to parse JSON: ${t}`))}}))}}function I(t,n){return e=>{t((t=>{try{e(JSON.stringify(t))}catch{n?.(new Error("Failed to convert to JSON"))}}))}}function K(t){return n=>{o(t,(t=>t[0]))(n)}}export{M as And,G as Bool,a as Branch,p as BranchLazy,R as Concatenated,v as Constant,m as Deadline,h as Deferred,d as Detached,E as Dirty,K as First,H as FromJson,$ as HashTable,g as Loading,O as Lock,S as Memo,C as Not,y as OnlyChanged,z as Or,j as Part,T as Path,b as Polling,F as RecordOf,P as RegexpMatch,A as RegexpMatched,L as RegexpReplaced,D as Router,q as Set,w as Shot,J as Task,k as Template,N as Tick,I as ToJson,x as Transaction};
//# sourceMappingURL=silentium-components.min.mjs.map
