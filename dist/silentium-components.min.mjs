import{ActualMessage as n,Message as t,Primitive as e,DestroyContainer as r,ResetSilenceCache as i,Shared as o,Filtered as c,isFilled as u,Late as s,MessageSource as f,Applied as h,All as l,Empty as a,Nothing as p,ExecutorApplied as d,Of as v,isMessage as m,Rejections as y,isDestroyable as g}from"silentium";function E(r,i,o){const c=n(r),u=n(i),s=o&&n(o);return t((function(n){const t=e(u);let r;void 0!==s&&(r=e(s)),c.then((e=>{let i=null;e?i=t.primitive():r&&(i=r.primitive()),null!==i&&n(i)}))}))}function b(n,e,i){return t((function(t){const o=r(),c=()=>{o.destroy()};return n.then((n=>{let r;c(),n?r=e():i&&(r=i()),void 0!==r&&(r.then(t),o.add(r))})),c}))}function j(n,e){return t((function(t,r){e.catch(r).then((()=>{t(n),t(i)}))}))}function O(e,r){const i=n(r);return t((function(n,t){let r=0;const u=o(e);i.then((e=>{r&&clearTimeout(r);let i=!1;r=setTimeout((()=>{i||(i=!0,t(new Error("Timeout reached in Deadline")))}),e);c(u,(()=>!i)).then(n),u.then((()=>{i=!0}))}))}))}function S(n,r){return t((function(t){const i=e(n);r.then((()=>{const n=i.primitive();u(n)&&t(n)}))}))}function w(n){return t((function(t){const r=e(n).primitive();u(r)&&t(r)}))}function $(n,t=[],e=[],r){const i=s({});return void 0===r&&(r=n=>JSON.parse(JSON.stringify(n))),f((function(o){const c=h(i,r);l(c,n).then((([n,r])=>{n&&o(Object.fromEntries(Object.entries(n).filter((([n,i])=>!!t.includes(n)||!e.includes(n)&&i!==r[n]))))}))}),(n=>{i.use(n)}))}function x(n,e){return t((function(t){n.then((()=>t(!0))),e.then((()=>t(!1)))}))}function T(n,e){return t((function(t){let r=!1;e.then((n=>{r=n}));c(n,(()=>!r)).then(t)}))}function J(n){return t((function(t){let e=null;n.then((n=>{n!==e&&u(n)&&(t(n),e=n)}))}))}function N(n,t){const e=s(),r={};return n.then((n=>{e.use(A(r,n,((n,t)=>{if(Array.isArray(n))return n.concat(t)})))})),t&&t.then((n=>{e.use(n)})),e}function A(n,t,e){return null==t||Object.keys(t).forEach((r=>{const i=t[r],o=n[r],c=e(o,i,r,n,t);void 0!==c?n[r]=c:F(i)&&F(o)?A(o,i,e):n[r]=i})),n}function F(n){return null!=n&&"object"==typeof n}function k(n){return t((function(t){let e=!1;n.then((n=>{!1===e?e=!0:t(n)}))}))}function P(t,r){const i=o(t),c=o(n(r));return f((function(n){l(i,c).then((([t,e])=>{const r=e.split(".");let i=t;r.forEach((n=>{i=i[n]})),void 0!==i&&i!==t&&n(i)}))}),(n=>{const r=e(c);if(u(r)){const i=e(t);t.use({...i.primitiveWithException(),[r.primitiveWithException()]:n})}}))}const R=Symbol("not-set");function D(t,e,r){const i=n(e),o=n(r??R);return h(l(t,i,o),(([n,t,e])=>{const r=t.split(".");let i=n;return r.forEach((n=>{i=i[n]})),void 0!==i&&i!==n?i:e!==R?e:void 0}))}function L(t,e){const r=n(t),i=n(e);return a(D(r,i,p))}function M(n,e){return t((function(t){e.then((()=>{n.then(t)}))}))}function W(n,r){return t((function(t){const i=e(n);i.primitive(),r.then((()=>{const n=i.primitive();u(n)&&t(n)}))}))}function q(e,r=0){const i=n(e);return t((function(n){let t=null;d(i,(n=>e=>{t&&clearTimeout(t),t=setTimeout((()=>{n(e)}),r)})).then(n)}))}function B(n){return t((function(t){let e=!1,r=null;n.then((n=>{r=n,e||(e=!0,queueMicrotask((()=>{e=!1,null!==r&&(t(r),r=null)})))}))}))}function I(n,e){return t((function(t){l(n,e).then((([n,e])=>{t(!(!n||!e))}))}))}function z(n){return t((function(t){h(n,Boolean).then(t)}))}function C(n){return t((function(t){n.then((n=>{t(!n)}))}))}function G(n,e){return t((function(t){l(n,e).then((([n,e])=>{t(!(!n&&!e))}))}))}function H(n){return t((function(t,e){n.then((n=>{try{t(JSON.parse(n))}catch(n){e(new Error(`Failed to parse JSON: ${n}`))}}))}))}function K(n){return t((function(t,e){n.then((n=>{try{t(JSON.stringify(n))}catch{e(new Error("Failed to convert to JSON"))}}))}))}function Q(n){return t((function(t){h(n,(n=>n[0])).then(t)}))}function U(e,r,i=v("")){const o=n(e),c=n(r),u=n(i);return t((function(n){l(o,c,u).then((([t,e,r])=>{const i=new RegExp(t,r).exec(e);n(i??[])}))}))}function V(e,r,i=v("")){const o=n(e),c=n(r),u=n(i);return t((function(n){l(o,c,u).then((([t,e,r])=>{n(new RegExp(t,r).test(e))}))}))}function X(t,e,r,i=""){const o=n(t),c=n(e),u=n(r),s=n(i);return h(l(c,o,u,s),(([n,t,e,r])=>String(t).replace(new RegExp(n,r),e)))}function Y(e,r,i){const o=n(e),c=n(r),u=n(i);return t((function(n){l(o,c,u).then((([t,e,r])=>{t[e]=r,n(t)}))}))}function Z(e,i,o){const c=n(i);return t((function(n){const t=r(),i=()=>{t.destroy()};return l(c,e).then((([e,r])=>{i();l(...e.map((n=>V(v(n.pattern),v(r),n.patternFlags?v(n.patternFlags):void 0)))).then((r=>{const i=r.findIndex((n=>!0===n));if(-1===i){const e=o();t.add(e),e.then(n)}if(i>-1){const r=e[i].message();t.add(r),r.then(n)}}))})),i}))}function _(n,e=v("")){return t((function(t){l(e,...n).then((([n,...e])=>{t(e.join(n))}))}))}function nn(n){return t((function(t){const e={};n.then((([n,r])=>{e[n]=r,t(e)}))}))}function tn(e){return t((function(t){const r=Object.keys(e);r.forEach((t=>{e[t]=n(e[t])})),l(...Object.values(e)).then((n=>{const e={};n.forEach(((n,t)=>{e[r[t]]=n})),t(e)}))}))}var en=Object.defineProperty,rn=(n,t,e)=>((n,t,e)=>t in n?en(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e)(n,"symbol"!=typeof t?t+"":t,e);function on(e="",r=v({})){const i=s();("string"==typeof e||m(e))&&i.chain(n(e));const o=new cn(i,r?n(r):void 0);return"function"==typeof e&&i.chain(t((n=>{n(e(o))}))),o}class cn{constructor(n=v(""),t=v({})){this.$src=n,this.$places=t,rn(this,"dc",r()),rn(this,"rejections",new y),rn(this,"vars",{$TPL:v("$TPL")})}then(n){const t=tn(this.vars);return h(l(this.$src,this.$places,t),(([n,t,e])=>{try{Object.entries(t).forEach((([t,e])=>{n=n.replaceAll(t,String(e))})),Object.entries(e).forEach((([t,e])=>{n=n.replaceAll(t,String(e))}))}catch(n){this.rejections.reject(n)}return n})).then(n),this}template(n){this.$src=v(n)}var(n){const t=`$var${Date.now().toString(36)+Math.random().toString(36).substring(2)}`;return g(n)&&this.dc.add(n),this.vars[t]=n,t}catch(n){return this.rejections.catch(n),this}destroy(){return this.dc.destroy(),this}}export{I as And,z as Bool,E as Branch,b as BranchLazy,_ as Concatenated,j as Constant,O as Deadline,S as Deferred,w as Detached,$ as Dirty,Q as First,H as FromJson,nn as HashTable,x as Loading,T as Lock,J as Memo,N as MergeAccumulation,C as Not,k as OnlyChanged,G as Or,P as Part,D as Path,L as PathExisted,M as Polling,tn as Record,U as RegexpMatch,V as RegexpMatched,X as RegexpReplaced,Z as Router,Y as Set,W as Shot,q as Task,on as Template,B as Tick,K as ToJson};
//# sourceMappingURL=silentium-components.min.mjs.map
