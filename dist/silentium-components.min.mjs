import{ActualMessage as n,Message as t,Primitive as e,DestroyContainer as i,Shared as r,Filtered as c,isFilled as o,Late as u,MessageSource as s,Applied as f,All as h,Empty as l,Nothing as a,ExecutorApplied as p,Of as d,LateShared as v,isMessage as m,Rejections as y,isDestroyable as E}from"silentium";function g(i,r,c){const o=n(i),u=n(r),s=c&&n(c);return t((function(n){const t=e(u);let i;void 0!==s&&(i=e(s)),o.then((e=>{let r=null;e?r=t.primitive():i&&(r=i.primitive()),null!==r&&n(r)}))}))}function O(n,e,r){return t((function(t){const c=i(),o=()=>{c.destroy()};return n.then((n=>{let i;o(),n?i=e():r&&(i=r()),void 0!==i&&(i.then(t),c.add(i))})),o}))}function j(n,e){return t((function(t){e.then((()=>{t(n)}))}))}function b(e,i){const o=n(i);return t((function(n,t){let i=0;const u=r(e);o.then((e=>{i&&clearTimeout(i);let r=!1;i=setTimeout((()=>{r||(r=!0,t(new Error("Timeout reached in Deadline")))}),e);c(u,(()=>!r)).then(n),u.then((()=>{r=!0}))}))}))}function $(n,i){return t((function(t){const r=e(n);i.then((()=>{const n=r.primitive();o(n)&&t(n)}))}))}function w(n){return t((function(t){const i=e(n).primitive();o(i)&&t(i)}))}function S(n,t=[],e=[],i){const r=u();return void 0===i&&(i=n=>JSON.parse(JSON.stringify(n))),s((function(c){const o=f(r,i);h(o,n).then((([n,i])=>{n&&c(Object.fromEntries(Object.entries(n).filter((([n,r])=>!!t.includes(n)||!e.includes(n)&&r!==i[n]))))}))}),(n=>{r.use(n)}))}function x(n,e){return t((function(t){n.then((()=>t(!0))),e.then((()=>t(!1)))}))}function T(n,e){return t((function(t){let i=!1;e.then((n=>{i=n}));c(n,(()=>!i)).then(t)}))}function J(n){return t((function(t){let e=null;n.then((n=>{n!==e&&o(n)&&(t(n),e=n)}))}))}function N(n){return t((function(t){let e=!1;n.then((n=>{!1===e?e=!0:t(n)}))}))}function F(t,i){const c=r(t),u=r(n(i));return s((function(n){h(c,u).then((([t,e])=>{const i=e.split(".");let r=t;i.forEach((n=>{r=r[n]})),void 0!==r&&r!==t&&n(r)}))}),(n=>{const i=e(u);if(o(i)){const r=e(t);t.use({...r.primitiveWithException(),[i.primitiveWithException()]:n})}}))}function k(e,i,r){const c=n(i),o=n(r);return t((function(n){h(e,c,o).then((([t,e,i])=>{const r=e.split(".");let c=t;r.forEach((n=>{c=c[n]})),void 0!==c&&c!==t?n(c):void 0!==i&&n(i)}))}))}function P(t,e){const i=n(t),r=n(e);return l(k(i,r,a))}function R(n,e){return t((function(t){e.then((()=>{n.then(t)}))}))}function A(n,i){return t((function(t){const r=e(n);r.primitive(),i.then((()=>{const n=r.primitive();o(n)&&t(n)}))}))}function L(e,i=0){const r=n(e);return t((function(n){let t=null;p(r,(n=>e=>{t&&clearTimeout(t),t=setTimeout((()=>{n(e)}),i)})).then(n)}))}function W(n){return t((function(t){let e=!1,i=null;n.then((n=>{i=n,e||(e=!0,queueMicrotask((()=>{e=!1,null!==i&&(t(i),i=null)})))}))}))}function q(n,e){return t((function(t){h(n,e).then((([n,e])=>{t(!(!n||!e))}))}))}function B(n){return t((function(t){f(n,Boolean).then(t)}))}function D(n){return t((function(t){n.then((n=>{t(!n)}))}))}function I(n,e){return t((function(t){h(n,e).then((([n,e])=>{t(!(!n&&!e))}))}))}function M(n){return t((function(t,e){n.then((n=>{try{t(JSON.parse(n))}catch(n){e(new Error(`Failed to parse JSON: ${n}`))}}))}))}function z(n){return t((function(t,e){n.then((n=>{try{t(JSON.stringify(n))}catch{e(new Error("Failed to convert to JSON"))}}))}))}function C(n){return t((function(t){f(n,(n=>n[0])).then(t)}))}function G(e,i,r=d("")){const c=n(e),o=n(i),u=n(r);return t((function(n){h(c,o,u).then((([t,e,i])=>{const r=new RegExp(t,i).exec(e);n(r??[])}))}))}function H(e,i,r=d("")){const c=n(e),o=n(i),u=n(r);return t((function(n){h(c,o,u).then((([t,e,i])=>{n(new RegExp(t,i).test(e))}))}))}function K(n,e,i,r=d("")){return t((function(t){h(e,n,i,r).then((([n,e,i,r])=>{t(String(e).replace(new RegExp(n,r),i))}))}))}function Q(e,i,r){const c=n(e),o=n(i),u=n(r);return t((function(n){h(c,o,u).then((([t,e,i])=>{t[e]=i,n(t)}))}))}function U(e,r,c){const o=n(r);return t((function(n){const t=i(),r=()=>{t.destroy()};return h(o,e).then((([e,i])=>{r();h(...e.map((n=>H(d(n.pattern),d(i),n.patternFlags?d(n.patternFlags):void 0)))).then((i=>{const r=i.findIndex((n=>!0===n));if(-1===r){const e=c();t.add(e),e.then(n)}if(r>-1){const i=e[r].message();t.add(i),i.then(n)}}))})),r}))}function V(n,e=d("")){return t((function(t){h(e,...n).then((([n,...e])=>{t(e.join(n))}))}))}function X(n){return t((function(t){const e={};n.then((([n,i])=>{e[n]=i,t(e)}))}))}function Y(e){return t((function(t){const i=Object.keys(e);i.forEach((t=>{e[t]=n(e[t])})),h(...Object.values(e)).then((n=>{const e={};n.forEach(((n,t)=>{e[i[t]]=n})),t(e)}))}))}var Z=Object.defineProperty,_=(n,t,e)=>((n,t,e)=>t in n?Z(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e)(n,"symbol"!=typeof t?t+"":t,e);function nn(e="",i=d({})){const r=v();("string"==typeof e||m(e))&&r.chain(n(e));const c=new tn(r,i?n(i):void 0);return"function"==typeof e&&r.chain(t((n=>{n(e(c))}))),c}class tn{constructor(n=d(""),t=d({})){this.$src=n,this.$places=t,_(this,"dc",i()),_(this,"rejections",new y),_(this,"vars",{$TPL:d("$TPL")})}then(n){const t=Y(this.vars);return f(h(this.$src,this.$places,t),(([n,t,e])=>{try{Object.entries(t).forEach((([t,e])=>{n=n.replaceAll(t,String(e))})),Object.entries(e).forEach((([t,e])=>{n=n.replaceAll(t,String(e))}))}catch(n){this.rejections.reject(n)}return n})).then(n),this}template(n){this.$src=d(n)}var(n){const t=`$var${Object.keys(this.vars).length}`;return E(n)&&this.dc.add(n),this.vars[t]=n,t}catch(n){return this.rejections.catch(n),this}destroy(){return this.dc.destroy(),this}}export{q as And,B as Bool,g as Branch,O as BranchLazy,V as Concatenated,j as Constant,b as Deadline,$ as Deferred,w as Detached,S as Dirty,C as First,M as FromJson,X as HashTable,x as Loading,T as Lock,J as Memo,D as Not,N as OnlyChanged,I as Or,F as Part,k as Path,P as PathExisted,R as Polling,Y as Record,G as RegexpMatch,H as RegexpMatched,K as RegexpReplaced,U as Router,Q as Set,A as Shot,L as Task,nn as Template,W as Tick,z as ToJson};
//# sourceMappingURL=silentium-components.min.mjs.map
