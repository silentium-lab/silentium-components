import{ActualMessage as t,Message as e,Primitive as i,Tap as n,DestroyContainer as s,Shared as r,Filtered as u,isFilled as o,Late as c,Applied as p,All as f,SharedSource as h,ExecutorApplied as l,LateShared as a,Of as d,isMessage as m,isDestroyable as b}from"silentium";function v(s,r,u){const o=t(s),c=t(r),p=u&&t(u);return e((function(){const t=i(c);let e;void 0!==p&&(e=i(p)),o.pipe(n((i=>{let n=null;i?n=t.primitive():e&&(n=e.primitive()),null!==n&&this.use(n)})))}))}function y(t,i,r){return e((function(){const e=s(),u=()=>{e.destroy()};return t.pipe(n((t=>{let n;u(),t?n=i.use():r&&(n=r.use()),void 0!==n&&(n.pipe(this),e.add(n))}))),u}))}function $(t,i){return e((function(){i.pipe(n((()=>{this.use(t)})))}))}function g(i,s,o){const c=t(o);return e((function(){let t=0;const e=r(s,!0);c.pipe(n((s=>{t&&clearTimeout(t);let r=!1;t=setTimeout((()=>{r||(r=!0,i.use(new Error("Timeout reached in Deadline")))}),s);u(e,(()=>!r)).pipe(this),e.pipe(n((()=>{r=!0})))})))}))}function E(t,s){return e((function(){const e=i(t);s.pipe(n((()=>{const t=e.primitive();o(t)&&this.use(t)})))}))}function O(t){return e((function(){const e=i(t).primitive();o(e)&&this.use(e)}))}var w=Object.defineProperty,j=(t,e,i)=>((t,e,i)=>e in t?w(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i)(t,"symbol"!=typeof e?e+"":e,i);function x(t,e=[],i=[],n){return new k(t,e,i,n)}class k{constructor(t,e=[],i=[],n){this.$base=t,this.keep=e,this.exclude=i,j(this,"$comparing",c()),j(this,"cloner"),this.cloner=void 0===n?t=>JSON.parse(JSON.stringify(t)):n}pipe(t){const e=p(this.$comparing,this.cloner);return f(e,this.$base).pipe(n((([e,i])=>{e&&t.use(Object.fromEntries(Object.entries(e).filter((([t,e])=>!!this.keep.includes(t)||!this.exclude.includes(t)&&e!==i[t]))))}))),this}use(t){return this.$comparing.use(t),this}}function S(t,i){return e((function(){t.pipe(n((()=>this.use(!0)))),i.pipe(n((()=>this.use(!1))))}))}function T(t,i){return e((function(){let e=!1;i.pipe(n((t=>{e=t})));u(t,(()=>!e)).pipe(this)}))}function J(t){return e((function(){let e=null;t.pipe(n((t=>{t!==e&&o(t)&&(this.use(t),e=t)})))}))}function N(t){return e((function(){let e=!1;t.pipe(n((t=>{!1===e?e=!0:this.use(t)})))}))}var P=Object.defineProperty,F=(t,e,i)=>((t,e,i)=>e in t?P(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i)(t,"symbol"!=typeof e?e+"":e,i);function R(e,i){return new A(e,t(i))}class A{constructor(t,e){F(this,"$base"),F(this,"$keyed"),this.$base=h(t),this.$keyed=r(e)}pipe(t){return f(this.$base,this.$keyed).pipe(n((([e,i])=>{const n=i.split(".");let s=e;n.forEach((t=>{s=s[t]})),void 0!==s&&s!==e&&t.use(s)}))),this}use(t){const e=i(this.$keyed);if(o(e)){const n=i(this.$base);this.$base.use({...n.primitiveWithException(),[e.primitiveWithException()]:t})}return this}}function L(i,s){const r=t(s);return e((function(){f(i,r).pipe(n((([t,e])=>{const i=e.split(".");let n=t;i.forEach((t=>{n=n[t]})),void 0!==n&&n!==t&&this.use(n)})))}))}function W(t,i){return e((function(){i.pipe(n((()=>{t.pipe(this)})))}))}function q(t,s){return e((function(){const e=i(t);e.primitive(),s.pipe(n((()=>{const t=e.primitive();o(t)&&this.use(t)})))}))}function B(t,i=0){return e((function(){let e=null;l(t,(t=>n=>{e&&clearTimeout(e),e=setTimeout((()=>{t(n)}),i)})).pipe(this)}))}function D(t){return e((function(){let e=!1,i=null;const s=()=>{e=!0,queueMicrotask((()=>{e=!1,null!==i&&(this.use(i),i=null)}))};t.pipe(n((t=>{i=t,e||s()})))}))}function I(t,i,...s){return e((function(){const e=a(),r=[];return t.pipe(n((t=>{const n=i(d(t),...s.map((t=>O(t))));r.push(n),n.pipe(e)}))),e.pipe(this),()=>{r.forEach((t=>t?.destroy())),r.length=0}}))}function M(t){return e((function(){const e={};t.pipe(n((([t,i])=>{e[t]=i,this.use(e)})))}))}function z(t){return e((function(){const e=Object.keys(t);e.forEach((e=>{m(t[e])||(t[e]=d(t[e]))})),f(...Object.values(t)).pipe(n((t=>{const i={};t.forEach(((t,n)=>{i[e[n]]=t})),this.use(i)})))}))}function C(t,i=d("")){return e((function(){f(i,...t).pipe(n((([t,...e])=>{this.use(e.join(t))})))}))}var G=Object.defineProperty,H=(t,e,i)=>((t,e,i)=>e in t?G(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i)(t,"symbol"!=typeof e?e+"":e,i);function K(t=d(""),e=d({})){return new Q(t,e)}class Q{constructor(t=d(""),e=d({})){this.$src=t,this.$places=e,H(this,"dc",s()),H(this,"vars",{$TPL:d("$TPL")})}pipe(t){const e=z(this.vars);return p(f(this.$src,this.$places,e),(([t,e,i])=>(Object.entries(e).forEach((([e,i])=>{t=t.replaceAll(e,String(i))})),Object.entries(i).forEach((([e,i])=>{t=t.replaceAll(e,String(i))})),t))).pipe(t),this}template(t){this.$src=d(t)}var(t){const e=`$var${Object.keys(this.vars).length}`;return b(t)&&this.dc.add(t),this.vars[e]=t,e}destroy(){return this.dc.destroy(),this}}function U(t,i,s=d("")){return e((function(){f(t,i,s).pipe(n((([t,e,i])=>{this.use(new RegExp(t,i).test(e))})))}))}function V(t,i,s,r=d("")){return e((function(){f(i,t,s,r).pipe(n((([t,e,i,n])=>{this.use(String(e).replace(new RegExp(t,n),i))})))}))}function X(t,i,s=d("")){return e((function(){f(t,i,s).pipe(n((([t,e,i])=>{const n=new RegExp(t,i).exec(e);this.use(n??[])})))}))}function Y(t,i,s){return e((function(){f(t,i,s).pipe(n((([t,e,i])=>{t[e]=i,this.use(t)})))}))}function Z(t,i,r){return e((function(){const e=s(),u=()=>{e.destroy()};return f(i,t).pipe(n((([t,i])=>{u();f(...t.map((t=>U(d(t.pattern),d(i),t.patternFlags?d(t.patternFlags):void 0)))).pipe(n((i=>{const n=i.findIndex((t=>!0===t));if(-1===n){const t=r.use();e.add(t),t.pipe(this)}if(n>-1){const i=t[n].message.use();e.add(i),i.pipe(this)}})))}))),u}))}function _(t,i){return e((function(){f(t,i).pipe(n((([t,e])=>{this.use(!(!t||!e))})))}))}function tt(t,i){return e((function(){f(t,i).pipe(n((([t,e])=>{this.use(!(!t&&!e))})))}))}function et(t){return e((function(){t.pipe(n((t=>{this.use(!t)})))}))}function it(t){return e((function(){p(t,Boolean).pipe(this)}))}function nt(t,i){return e((function(){t.pipe(n((t=>{try{this.use(JSON.parse(t))}catch(t){i?.use(new Error(`Failed to parse JSON: ${t}`))}})))}))}function st(t,i){return e((function(){t.pipe(n((t=>{try{this.use(JSON.stringify(t))}catch{i?.use(new Error("Failed to convert to JSON"))}})))}))}function rt(t){return e((function(){p(t,(t=>t[0])).pipe(this)}))}export{_ as And,it as Bool,v as Branch,y as BranchLazy,C as Concatenated,$ as Constant,g as Deadline,E as Deferred,O as Detached,x as Dirty,rt as First,nt as FromJson,M as HashTable,S as Loading,T as Lock,J as Memo,et as Not,N as OnlyChanged,tt as Or,R as Part,L as Path,W as Polling,z as Record,X as RegexpMatch,U as RegexpMatched,V as RegexpReplaced,Z as Router,Y as Set,q as Shot,B as Task,K as Template,D as Tick,st as ToJson,I as Transaction};
//# sourceMappingURL=silentium-components.min.mjs.map
