import{Event as e,Primitive as t,Transport as n,DestroyContainer as r,Shared as s,Filtered as i,isFilled as u,Late as o,Applied as c,All as l,SharedSource as v,ExecutorApplied as a,LateShared as f,Of as h,isDestroyable as p}from"silentium";function d(r,s,i){return e((e=>{const u=t(s);let o;void 0!==i&&(o=t(i)),r.event(n((t=>{let n=null;t?n=u.primitive():o&&(n=o.primitive()),null!==n&&e.use(n)})))}))}function b(t,s,i){return e((e=>{const u=r(),o=()=>{u.destroy()};return t.event(n((t=>{let n;o(),t?n=s.use():i&&(n=i.use()),void 0!==n&&(n.event(e),u.add(n))}))),o}))}function m(t,r){return e((e=>{r.event(n((()=>{e.use(t)})))}))}function y(t,r,u){return e((e=>{let o=0;const c=s(r,!0);u.event(n((r=>{o&&clearTimeout(o);let s=!1;o=setTimeout((()=>{s||(s=!0,t.use(new Error("Timeout reached in Deadline")))}),r);i(c,(()=>!s)).event(e),c.event(n((()=>{s=!0})))})))}))}function $(r,s){return e((e=>{const i=t(r);s.event(n((()=>{const t=i.primitive();u(t)&&e.use(t)})))}))}function g(n){return e((e=>{const r=t(n).primitive();u(r)&&e.use(r)}))}var O=Object.defineProperty,E=(e,t,n)=>((e,t,n)=>t in e?O(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);function w(e,t=[],n=[],r){return new j(e,t,n,r)}class j{constructor(e,t=[],n=[],r){this.$base=e,this.keep=t,this.exclude=n,E(this,"$comparing",o()),E(this,"cloner"),this.cloner=void 0===r?e=>JSON.parse(JSON.stringify(e)):r}event(e){const t=c(this.$comparing,this.cloner);return l(t,this.$base).event(n((([t,n])=>{t&&e.use(Object.fromEntries(Object.entries(t).filter((([e,t])=>!!this.keep.includes(e)||!this.exclude.includes(e)&&t!==n[e]))))}))),this}use(e){return this.$comparing.use(e),this}}function x(t,r){return e((e=>{t.event(n((()=>e.use(!0)))),r.event(n((()=>e.use(!1))))}))}function k(t,r){return e((e=>{let s=!1;r.event(n((e=>{s=e})));i(t,(()=>!s)).event(e)}))}function S(t){return e((e=>{let r=null;t.event(n((t=>{t!==r&&u(t)&&(e.use(t),r=t)})))}))}function T(t){return e((e=>{let r=!1;t.event(n((t=>{!1===r?r=!0:e.use(t)})))}))}var J=Object.defineProperty,N=(e,t,n)=>((e,t,n)=>t in e?J(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);function P(e,t){return new F(e,t)}class F{constructor(e,t){N(this,"$base"),N(this,"$keyed"),this.$base=v(e),this.$keyed=s(t)}event(e){return l(this.$base,this.$keyed).event(n((([t,n])=>{const r=n.split(".");let s=t;r.forEach((e=>{s=s[e]})),void 0!==s&&s!==t&&e.use(s)}))),this}use(e){const n=t(this.$keyed);if(u(n)){const r=t(this.$base);this.$base.use({...r.primitiveWithException(),[n.primitiveWithException()]:e})}return this}}function R(t,r){return e((e=>{l(t,r).event(n((([t,n])=>{const r=n.split(".");let s=t;r.forEach((e=>{s=s[e]})),void 0!==s&&s!==t&&e.use(s)})))}))}function A(t,r){return e((e=>{r.event(n((()=>{t.event(e)})))}))}function L(r,s){return e((e=>{const i=t(r);i.primitive(),s.event(n((()=>{const t=i.primitive();u(t)&&e.use(t)})))}))}function W(t,n=0){return e((e=>{let r=null;a(t,(e=>t=>{r&&clearTimeout(r),r=setTimeout((()=>{e(t)}),n)})).event(e)}))}function q(t){return e((e=>{let r=!1,s=null;t.event(n((t=>{s=t,r||(r=!0,queueMicrotask((()=>{r=!1,null!==s&&(e.use(s),s=null)})))})))}))}function B(t,r,...s){return e((e=>{const i=f(),u=[];return t.event(n((e=>{const t=r(h(e),...s.map((e=>g(e))));u.push(t),t.event(i)}))),i.event(e),()=>{u.forEach((e=>e?.destroy())),u.length=0}}))}function D(t){return e((e=>{const r={};t.event(n((([t,n])=>{r[t]=n,e.use(r)})))}))}function I(t){return e((e=>{const r=Object.keys(t);l(...Object.values(t)).event(n((t=>{const n={};t.forEach(((e,t)=>{n[r[t]]=e})),e.use(n)})))}))}function M(t,r=h("")){return e((e=>{l(r,...t).event(n((([t,...n])=>{e.use(n.join(t))})))}))}var z=Object.defineProperty,C=(e,t,n)=>((e,t,n)=>t in e?z(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);function G(e=h(""),t=h({})){return new H(e,t)}class H{constructor(e=h(""),t=h({})){this.$src=e,this.$places=t,C(this,"dc",r()),C(this,"vars",{$TPL:h("$TPL")})}event(e){const t=I(this.vars);return c(l(this.$src,this.$places,t),(([e,t,n])=>(Object.entries(t).forEach((([t,n])=>{e=e.replaceAll(t,String(n))})),Object.entries(n).forEach((([t,n])=>{e=e.replaceAll(t,String(n))})),e))).event(e),this}template(e){this.$src=h(e)}var(e){const t=`$var${Object.keys(this.vars).length}`;return p(e)&&this.dc.add(e),this.vars[t]=e,t}destroy(){return this.dc.destroy(),this}}function K(t,r,s=h("")){return e((e=>{l(t,r,s).event(n((([t,n,r])=>{e.use(new RegExp(t,r).test(n))})))}))}function Q(t,r,s,i=h("")){return e((e=>{l(r,t,s,i).event(n((([t,n,r,s])=>{e.use(String(n).replace(new RegExp(t,s),r))})))}))}function U(t,r,s=h("")){return e((e=>{l(t,r,s).event(n((([t,n,r])=>{const s=new RegExp(t,r).exec(n);e.use(s??[])})))}))}function V(t,r,s){return e((e=>{l(t,r,s).event(n((([t,n,r])=>{t[n]=r,e.use(t)})))}))}function X(t,s,i){return e((e=>{const u=r(),o=()=>{u.destroy()};return l(s,t).event(n((([t,r])=>{o();l(...t.map((e=>K(h(e.pattern),h(r),e.patternFlags?h(e.patternFlags):void 0)))).event(n((n=>{const r=n.findIndex((e=>!0===e));if(-1===r){const t=i.use();u.add(t),t.event(e)}if(r>-1){const n=t[r].event.use();u.add(n),n.event(e)}})))}))),o}))}function Y(t,r){return e((e=>{l(t,r).event(n((([t,n])=>{e.use(t&&n)})))}))}function Z(t,r){return e((e=>{l(t,r).event(n((([t,n])=>{e.use(t||n)})))}))}function _(t){return e((e=>{t.event(n((t=>{e.use(!t)})))}))}function ee(t){return e((e=>{c(t,Boolean).event(e)}))}function te(t,r){return e((e=>{t.event(n((t=>{try{e.use(JSON.parse(t))}catch(e){r?.use(new Error(`Failed to parse JSON: ${e}`))}})))}))}function ne(t,r){return e((e=>{t.event(n((t=>{try{e.use(JSON.stringify(t))}catch{r?.use(new Error("Failed to convert to JSON"))}})))}))}function re(t){return e((e=>{c(t,(e=>e[0])).event(e)}))}export{Y as And,ee as Bool,d as Branch,b as BranchLazy,M as Concatenated,m as Constant,y as Deadline,$ as Deferred,g as Detached,w as Dirty,re as First,te as FromJson,D as HashTable,x as Loading,k as Lock,S as Memo,_ as Not,T as OnlyChanged,Z as Or,P as Part,R as Path,A as Polling,I as RecordOf,U as RegexpMatch,K as RegexpMatched,Q as RegexpReplaced,X as Router,V as Set,L as Shot,W as Task,G as Template,q as Tick,ne as ToJson,B as Transaction};
//# sourceMappingURL=silentium-components.min.mjs.map
